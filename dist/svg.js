"use strict";System.register([],function(a,b){var c;return{setters:[],execute:function(){c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},function(a,b){"function"==typeof define&&define.amd?define(function(){return b(a,a.document)}):"object"===("undefined"==typeof exports?"undefined":c(exports))?module.exports=a.document?b(a,a.document):function(a){return b(a,a.document)}:a.SVG=b(a,a.document)}("undefined"!=typeof window?window:void 0,function(a,b){function d(a,b,c,d){return c+d.replace(w.regex.dots," .")}function e(a){for(var b=a.slice(0),c=b.length;c--;)Array.isArray(b[c])&&(b[c]=e(b[c]));return b}function f(a,b){return a instanceof b}function g(a,b){return(a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector).call(a,b)}function h(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function i(a){return a.charAt(0).toUpperCase()+a.slice(1)}function j(a){return 4==a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a}function k(a){var b=a.toString(16);return 1==b.length?"0"+b:b}function l(a,b,c){if(null==b||null==c){var d=a.bbox();null==b?b=d.width/d.height*c:null==c&&(c=d.height/d.width*b)}return{width:b,height:c}}function m(a,b,c){return{x:b*a.a+c*a.c+0,y:b*a.b+c*a.d+0}}function n(a){return{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}}function o(a){return a instanceof w.Matrix||(a=new w.Matrix(a)),a}function p(a,b){a.cx=null==a.cx?b.bbox().cx:a.cx,a.cy=null==a.cy?b.bbox().cy:a.cy}function q(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b][0],null!=a[b][1]&&(d+=a[b][1],null!=a[b][2]&&(d+=" ",d+=a[b][2],null!=a[b][3]&&(d+=" ",d+=a[b][3],d+=" ",d+=a[b][4],null!=a[b][5]&&(d+=" ",d+=a[b][5],d+=" ",d+=a[b][6],null!=a[b][7]&&(d+=" ",d+=a[b][7])))));return d+" "}function r(b){for(var c=b.childNodes.length-1;c>=0;c--)b.childNodes[c]instanceof a.SVGElement&&r(b.childNodes[c]);return w.adopt(b).id(w.eid(b.nodeName))}function s(a){return null==a.x&&(a.x=0,a.y=0,a.width=0,a.height=0),a.w=a.width,a.h=a.height,a.x2=a.x+a.width,a.y2=a.y+a.height,a.cx=a.x+a.width/2,a.cy=a.y+a.height/2,a}function t(a){var b=(a||"").toString().match(w.regex.reference);if(b)return b[1]}function u(a){return Math.abs(a)>1e-37?a:0}var v="undefined"!=typeof this?this:a,w=v.SVG=function(a){if(w.supported)return a=new w.Doc(a),w.parser.draw||w.prepare(),a};if(w.ns="http://www.w3.org/2000/svg",w.xmlns="http://www.w3.org/2000/xmlns/",w.xlink="http://www.w3.org/1999/xlink",w.svgjs="http://svgjs.com/svgjs",w.supported=function(){return!!b.createElementNS&&!!b.createElementNS(w.ns,"svg").createSVGRect}(),!w.supported)return!1;w.did=1e3,w.eid=function(a){return"Svgjs"+i(a)+w.did++},w.create=function(a){var c=b.createElementNS(this.ns,a);return c.setAttribute("id",this.eid(a)),c},w.extend=function(){var a,b,c,d;for(a=[].slice.call(arguments),b=a.pop(),d=a.length-1;d>=0;d--)if(a[d])for(c in b)a[d].prototype[c]=b[c];w.Set&&w.Set.inherit&&w.Set.inherit()},w.invent=function(a){var b="function"==typeof a.create?a.create:function(){this.constructor.call(this,w.create(a.create))};return a.inherit&&(b.prototype=new a.inherit),a.extend&&w.extend(b,a.extend),a.construct&&w.extend(a.parent||w.Container,a.construct),b},w.adopt=function(b){if(!b)return null;if(b.instance)return b.instance;var c;return c="svg"==b.nodeName?b.parentNode instanceof a.SVGElement?new w.Nested:new w.Doc:"linearGradient"==b.nodeName?new w.Gradient("linear"):"radialGradient"==b.nodeName?new w.Gradient("radial"):w[i(b.nodeName)]?new(w[i(b.nodeName)]):new w.Element(b),c.type=b.nodeName,c.node=b,b.instance=c,c instanceof w.Doc&&c.namespace().defs(),c.setData(JSON.parse(b.getAttribute("svgjs:data"))||{}),c},w.prepare=function(){var a=b.getElementsByTagName("body")[0],c=(a?new w.Doc(a):w.adopt(b.documentElement).nested()).size(2,0);w.parser={body:a||b.documentElement,draw:c.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:c.polyline().node,path:c.path().node,"native":w.create("svg")}},w.parser={"native":w.create("svg")},b.addEventListener("DOMContentLoaded",function(){w.parser.draw||w.prepare()},!1),w.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},w.utils={map:function(a,b){var c,d=a.length,e=[];for(c=0;c<d;c++)e.push(b(a[c]));return e},filter:function(a,b){var c,d=a.length,e=[];for(c=0;c<d;c++)b(a[c])&&e.push(a[c]);return e},radians:function(a){return a%360*Math.PI/180},degrees:function(a){return 180*a/Math.PI%360},filterSVGElements:function(b){return this.filter(b,function(b){return b instanceof a.SVGElement})}},w.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},w.Color=function(a){var b;this.r=0,this.g=0,this.b=0,a&&("string"==typeof a?w.regex.isRgb.test(a)?(b=w.regex.rgb.exec(a.replace(w.regex.whitespace,"")),this.r=parseInt(b[1]),this.g=parseInt(b[2]),this.b=parseInt(b[3])):w.regex.isHex.test(a)&&(b=w.regex.hex.exec(j(a)),this.r=parseInt(b[1],16),this.g=parseInt(b[2],16),this.b=parseInt(b[3],16)):"object"===("undefined"==typeof a?"undefined":c(a))&&(this.r=a.r,this.g=a.g,this.b=a.b))},w.extend(w.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+k(this.r)+k(this.g)+k(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(a){return this.destination=new w.Color(a),this},at:function(a){return this.destination?(a=a<0?0:a>1?1:a,new w.Color({r:~~(this.r+(this.destination.r-this.r)*a),g:~~(this.g+(this.destination.g-this.g)*a),b:~~(this.b+(this.destination.b-this.b)*a)})):this}}),w.Color.test=function(a){return a+="",w.regex.isHex.test(a)||w.regex.isRgb.test(a)},w.Color.isRgb=function(a){return a&&"number"==typeof a.r&&"number"==typeof a.g&&"number"==typeof a.b},w.Color.isColor=function(a){return w.Color.isRgb(a)||w.Color.test(a)},w.Array=function(a,b){a=(a||[]).valueOf(),0==a.length&&b&&(a=b.valueOf()),this.value=this.parse(a)},w.extend(w.Array,{morph:function(a){if(this.destination=this.parse(a),this.value.length!=this.destination.length){for(var b=this.value[this.value.length-1],c=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(c);for(;this.value.length<this.destination.length;)this.value.push(b)}return this},settle:function(){for(var a=0,b=this.value.length,c=[];a<b;a++)c.indexOf(this.value[a])==-1&&c.push(this.value[a]);return this.value=c},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];b<c;b++)d.push(this.value[b]+(this.destination[b]-this.value[b])*a);return new w.Array(d)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(a){return a=a.valueOf(),Array.isArray(a)?a:this.split(a)},split:function(a){return a.trim().split(w.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function E(){var E=new this.constructor;return E.value=e(this.value),E}}),w.PointArray=function(a,b){w.Array.call(this,a,b||[[0,0]])},w.PointArray.prototype=new w.Array,w.PointArray.prototype.constructor=w.PointArray,w.extend(w.PointArray,{toString:function(){for(var a=0,b=this.value.length,c=[];a<b;a++)c.push(this.value[a].join(","));return c.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];b<c;b++)d.push([this.value[b][0]+(this.destination[b][0]-this.value[b][0])*a,this.value[b][1]+(this.destination[b][1]-this.value[b][1])*a]);return new w.PointArray(d)},parse:function(a){var b=[];if(a=a.valueOf(),Array.isArray(a)){if(Array.isArray(a[0]))return a.map(function(a){return a.slice()});if(null!=a[0].x)return a.map(function(a){return[a.x,a.y]})}else a=a.trim().split(w.regex.delimiter).map(parseFloat);a.length%2!==0&&a.pop();for(var c=0,d=a.length;c<d;c+=2)b.push([a[c],a[c+1]]);return b},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d=this.value.length-1;d>=0;d--)this.value[d]=[this.value[d][0]+a,this.value[d][1]+b];return this},size:function(a,b){var c,d=this.bbox();for(c=this.value.length-1;c>=0;c--)d.width&&(this.value[c][0]=(this.value[c][0]-d.x)*a/d.width+d.x),d.height&&(this.value[c][1]=(this.value[c][1]-d.y)*b/d.height+d.y);return this},bbox:function(){return w.parser.poly.setAttribute("points",this.toString()),w.parser.poly.getBBox()}});for(var x={M:function(a,b,c){return b.x=c.x=a[0],b.y=c.y=a[1],["M",b.x,b.y]},L:function(a,b){return b.x=a[0],b.y=a[1],["L",a[0],a[1]]},H:function(a,b){return b.x=a[0],["H",a[0]]},V:function(a,b){return b.y=a[0],["V",a[0]]},C:function(a,b){return b.x=a[4],b.y=a[5],["C",a[0],a[1],a[2],a[3],a[4],a[5]]},S:function(a,b){return b.x=a[2],b.y=a[3],["S",a[0],a[1],a[2],a[3]]},Q:function(a,b){return b.x=a[2],b.y=a[3],["Q",a[0],a[1],a[2],a[3]]},T:function(a,b){return b.x=a[0],b.y=a[1],["T",a[0],a[1]]},Z:function(a,b,c){return b.x=c.x,b.y=c.y,["Z"]},A:function(a,b){return b.x=a[5],b.y=a[6],["A",a[0],a[1],a[2],a[3],a[4],a[5],a[6]]}},y="mlhvqtcsaz".split(""),z=0,A=y.length;z<A;++z)x[y[z]]=function(a){return function(b,c,d){if("H"==a)b[0]=b[0]+c.x;else if("V"==a)b[0]=b[0]+c.y;else if("A"==a)b[5]=b[5]+c.x,b[6]=b[6]+c.y;else for(var e=0,f=b.length;e<f;++e)b[e]=b[e]+(e%2?c.y:c.x);return x[a](b,c,d)}}(y[z].toUpperCase());w.PathArray=function(a,b){w.Array.call(this,a,b||[["M",0,0]])},w.PathArray.prototype=new w.Array,w.PathArray.prototype.constructor=w.PathArray,w.extend(w.PathArray,{toString:function(){return q(this.value)},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d,e=this.value.length-1;e>=0;e--)d=this.value[e][0],"M"==d||"L"==d||"T"==d?(this.value[e][1]+=a,this.value[e][2]+=b):"H"==d?this.value[e][1]+=a:"V"==d?this.value[e][1]+=b:"C"==d||"S"==d||"Q"==d?(this.value[e][1]+=a,this.value[e][2]+=b,this.value[e][3]+=a,this.value[e][4]+=b,"C"==d&&(this.value[e][5]+=a,this.value[e][6]+=b)):"A"==d&&(this.value[e][6]+=a,this.value[e][7]+=b);return this},size:function(a,b){var c,d,e=this.bbox();for(c=this.value.length-1;c>=0;c--)d=this.value[c][0],"M"==d||"L"==d||"T"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y):"H"==d?this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x:"V"==d?this.value[c][1]=(this.value[c][1]-e.y)*b/e.height+e.y:"C"==d||"S"==d||"Q"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y,this.value[c][3]=(this.value[c][3]-e.x)*a/e.width+e.x,this.value[c][4]=(this.value[c][4]-e.y)*b/e.height+e.y,"C"==d&&(this.value[c][5]=(this.value[c][5]-e.x)*a/e.width+e.x,this.value[c][6]=(this.value[c][6]-e.y)*b/e.height+e.y)):"A"==d&&(this.value[c][1]=this.value[c][1]*a/e.width,this.value[c][2]=this.value[c][2]*b/e.height,this.value[c][6]=(this.value[c][6]-e.x)*a/e.width+e.x,this.value[c][7]=(this.value[c][7]-e.y)*b/e.height+e.y);return this},equalCommands:function F(a){var b,c,F;for(a=new w.PathArray(a),F=this.value.length===a.value.length,b=0,c=this.value.length;F&&b<c;b++)F=this.value[b][0]===a.value[b][0];return F},morph:function(a){return a=new w.PathArray(a),this.equalCommands(a)?this.destination=a:this.destination=null,this},at:function(a){if(!this.destination)return this;var b,c,d,e,f=this.value,g=this.destination.value,h=[],i=new w.PathArray;for(b=0,c=f.length;b<c;b++){for(h[b]=[f[b][0]],d=1,e=f[b].length;d<e;d++)h[b][d]=f[b][d]+(g[b][d]-f[b][d])*a;"A"===h[b][0]&&(h[b][4]=+(0!=h[b][4]),h[b][5]=+(0!=h[b][5]))}return i.value=h,i},parse:function(a){if(a instanceof w.PathArray)return a.valueOf();var b,c,e={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};a="string"==typeof a?a.replace(w.regex.numbersWithDots,d).replace(w.regex.pathLetters," $& ").replace(w.regex.hyphen,"$1 -").trim().split(w.regex.delimiter):a.reduce(function(a,b){return[].concat.call(a,b)},[]);var c=[],f=new w.Point,g=new w.Point,h=0,i=a.length;do w.regex.isPathLetter.test(a[h])?(b=a[h],++h):"M"==b?b="L":"m"==b&&(b="l"),c.push(x[b].call(null,a.slice(h,h+=e[b.toUpperCase()]).map(parseFloat),f,g));while(i>h);return c},bbox:function(){return w.parser.path.setAttribute("d",this.toString()),w.parser.path.getBBox()}}),w.Number=w.invent({create:function(a,b){this.value=0,this.unit=b||"","number"==typeof a?this.value=isNaN(a)?0:isFinite(a)?a:a<0?-3.4e38:3.4e38:"string"==typeof a?(b=a.match(w.regex.numberAndUnit),b&&(this.value=parseFloat(b[1]),"%"==b[5]?this.value/=100:"s"==b[5]&&(this.value*=1e3),this.unit=b[5])):a instanceof w.Number&&(this.value=a.valueOf(),this.unit=a.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(a){return a=new w.Number(a),new w.Number(this+a,this.unit||a.unit)},minus:function(a){return a=new w.Number(a),new w.Number(this-a,this.unit||a.unit)},times:function(a){return a=new w.Number(a),new w.Number(this*a,this.unit||a.unit)},divide:function(a){return a=new w.Number(a),new w.Number(this/a,this.unit||a.unit)},to:function(a){var b=new w.Number(this);return"string"==typeof a&&(b.unit=a),b},morph:function(a){return this.destination=new w.Number(a),a.relative&&(this.destination.value+=this.value),this},at:function(a){return this.destination?new w.Number(this.destination).minus(this).times(a).plus(this):this}}}),w.Element=w.invent({create:function(a){this._stroke=w.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=a)&&(this.type=a.nodeName,this.node.instance=this,this._stroke=a.getAttribute("stroke")||this._stroke)},extend:{x:function(a){return this.attr("x",a)},y:function(a){return this.attr("y",a)},cx:function(a){return null==a?this.x()+this.width()/2:this.x(a-this.width()/2)},cy:function(a){return null==a?this.y()+this.height()/2:this.y(a-this.height()/2)},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},width:function(a){return this.attr("width",a)},height:function(a){return this.attr("height",a)},size:function(a,b){var c=l(this,a,b);return this.width(new w.Number(c.width)).height(new w.Number(c.height))},clone:function G(a){this.writeDataToDom();var G=r(this.node.cloneNode(!0));return a?a.add(G):this.after(G),G},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(a){return this.after(a).remove(),a},addTo:function(a){return a.put(this)},putIn:function(a){return a.add(this)},id:function(a){return this.attr("id",a)},inside:function(a,b){var c=this.bbox();return a>c.x&&b>c.y&&a<c.x+c.width&&b<c.y+c.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var a=this.attr("class");return null==a?[]:a.trim().split(w.regex.delimiter)},hasClass:function(a){return this.classes().indexOf(a)!=-1},addClass:function(a){if(!this.hasClass(a)){var b=this.classes();b.push(a),this.attr("class",b.join(" "))}return this},removeClass:function(a){return this.hasClass(a)&&this.attr("class",this.classes().filter(function(b){return b!=a}).join(" ")),this},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)},reference:function(a){return w.get(this.attr(a))},parent:function H(b){var H=this;if(!H.node.parentNode)return null;if(H=w.adopt(H.node.parentNode),!b)return H;for(;H&&H.node instanceof a.SVGElement;){if("string"==typeof b?H.matches(b):H instanceof b)return H;if(!H.node.parentNode||"#document"==H.node.parentNode.nodeName)return null;H=w.adopt(H.node.parentNode)}},doc:function(){return this instanceof w.Doc?this:this.parent(w.Doc)},parents:function I(a){var I=[],b=this;do{if(b=b.parent(a),!b||!b.node)break;I.push(b)}while(b.parent);return I},matches:function(a){return g(this.node,a)},"native":function(){return this.node},svg:function(a){var c=b.createElement("svg");if(!(a&&this instanceof w.Parent))return c.appendChild(a=b.createElement("svg")),this.writeDataToDom(),a.appendChild(this.node.cloneNode(!0)),c.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");c.innerHTML="<svg>"+a.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var d=0,e=c.firstChild.childNodes.length;d<e;d++)this.node.appendChild(c.firstChild.firstChild);return this},writeDataToDom:function(){if(this.each||this.lines){var a=this.each?this:this.lines();a.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(a){return this.dom=a,this},is:function(a){return f(this,a)}}}),w.easing={"-":function(a){return a},"<>":function(a){return-Math.cos(a*Math.PI)/2+.5},">":function(a){return Math.sin(a*Math.PI/2)},"<":function(a){return-Math.cos(a*Math.PI/2)+1}},w.morph=function(a){return function(b,c){return new w.MorphObj(b,c).at(a)}},w.Situation=w.invent({create:function(a){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new w.Number(a.duration).valueOf(),this.delay=new w.Number(a.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=a.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),w.FX=w.invent({create:function(a){this._target=a,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(a,b,d){"object"==("undefined"==typeof a?"undefined":c(a))&&(b=a.ease,d=a.delay,a=a.duration);var e=new w.Situation({duration:a||1e3,delay:d||0,ease:w.easing[b||"-"]||b});return this.queue(e),this},delay:function(a){var b=new w.Situation({duration:a,delay:0,ease:w.easing["-"]});return this.queue(b)},target:function(a){return a&&a instanceof w.Element?(this._target=a,this):this._target},timeToAbsPos:function(a){return(a-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(a){return this.situation.duration/this._speed*a+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=a.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){a.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(a){return("function"==typeof a||a instanceof w.Situation)&&this.situations.push(a),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof w.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var a,b,c,d=this.situation;if(d.init)return this;for(a in d.animations)for(c=this.target()[a](),Array.isArray(c)||(c=[c]),Array.isArray(d.animations[a])||(d.animations[a]=[d.animations[a]]),b=c.length;b--;)d.animations[a][b]instanceof w.Number&&(c[b]=new w.Number(c[b])),d.animations[a][b]=c[b].morph(d.animations[a][b]);for(a in d.attrs)d.attrs[a]=new w.MorphObj(this.target().attr(a),d.attrs[a]);for(a in d.styles)d.styles[a]=new w.MorphObj(this.target().style(a),d.styles[a]);return d.initialTransformation=this.target().matrixify(),d.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(a,b){var c=this.active;return this.active=!1,b&&this.clearQueue(),a&&this.situation&&(!c&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var a=this.situation;this.stop(),this.situation=a,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(a,b){var c=this.situation.duration/this._speed;return this.absPos=a,b||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*c,this.situation.finish=this.situation.start+c,this.step(!0)},speed:function(a){return 0===a?this.pause():a?(this._speed=a,this.at(this.absPos,!0)):this._speed},loop:function(a,b){var c=this.last();return c.loops=null==a||a,c.loop=0,b&&(c.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(a){var b=this.last();return"undefined"==typeof a?b.reversed=!b.reversed:b.reversed=a,this},progress:function(a){return a?this.situation.ease(this.pos):this.pos},after:function(a){var b=this.last(),c=function d(c){c.detail.situation==b&&(a.call(this,b),this.off("finished.fx",d))};return this.target().on("finished.fx",c),this._callStart()},during:function(a){var b=this.last(),c=function(c){c.detail.situation==b&&a.call(this,c.detail.pos,w.morph(c.detail.pos),c.detail.eased,b)};return this.target().off("during.fx",c).on("during.fx",c),this.after(function(){this.off("during.fx",c)}),this._callStart()},afterAll:function(a){var b=function c(b){a.call(this),this.off("allfinished.fx",c)};return this.target().off("allfinished.fx",b).on("allfinished.fx",b),this._callStart()},duringAll:function(a){var b=function(b){a.call(this,b.detail.pos,w.morph(b.detail.pos),b.detail.eased,b.detail.situation)};return this.target().off("during.fx",b).on("during.fx",b),this.afterAll(function(){this.off("during.fx",b)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(a,b,c){return this.last()[c||"animations"][a]=b,this._callStart()},step:function(a){if(a||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var b,c,d;b=Math.max(this.absPos,0),c=Math.floor(b),this.situation.loops===!0||c<this.situation.loops?(this.pos=b-c,d=this.situation.loop,this.situation.loop=c):(this.absPos=this.situation.loops,this.pos=1,d=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-d)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var e=this.situation.ease(this.pos);for(var f in this.situation.once)f>this.lastPos&&f<=e&&(this.situation.once[f].call(this.target(),this.pos,e),delete this.situation.once[f]);return this.active&&this.target().fire("during",{pos:this.pos,eased:e,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=e,this):this},eachAt:function(){var a,b,c,d=this,e=this.target(),f=this.situation;for(a in f.animations)c=[].concat(f.animations[a]).map(function(a){return"string"!=typeof a&&a.at?a.at(f.ease(d.pos),d.pos):a}),e[a].apply(e,c);for(a in f.attrs)c=[a].concat(f.attrs[a]).map(function(a){return"string"!=typeof a&&a.at?a.at(f.ease(d.pos),d.pos):a}),e.attr.apply(e,c);for(a in f.styles)c=[a].concat(f.styles[a]).map(function(a){return"string"!=typeof a&&a.at?a.at(f.ease(d.pos),d.pos):a}),e.style.apply(e,c);if(f.transforms.length){for(c=f.initialTransformation,a=0,b=f.transforms.length;a<b;a++){var g=f.transforms[a];g instanceof w.Matrix?c=g.relative?c.multiply((new w.Matrix).morph(g).at(f.ease(this.pos))):c.morph(g).at(f.ease(this.pos)):(g.relative||g.undo(c.extract()),c=c.multiply(g.at(f.ease(this.pos))))}e.matrix(c)}return this},once:function(a,b,c){var d=this.last();return c||(a=d.ease(a)),d.once[a]=b,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:w.Element,construct:{animate:function(a,b,c){return(this.fx||(this.fx=new w.FX(this))).animate(a,b,c)},delay:function(a){return(this.fx||(this.fx=new w.FX(this))).delay(a)},stop:function(a,b){return this.fx&&this.fx.stop(a,b),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(a){if(this.fx){if(null==a)return this.fx.speed();this.fx.speed(a)}return this}}}),w.MorphObj=w.invent({create:function(a,b){return w.Color.isColor(b)?new w.Color(a).morph(b):w.regex.delimiter.test(a)?w.regex.pathLetters.test(a)?new w.PathArray(a).morph(b):new w.Array(a).morph(b):w.regex.numberAndUnit.test(b)?new w.Number(a).morph(b):(this.value=a,void(this.destination=b))},extend:{at:function(a,b){return b<1?this.value:this.destination},valueOf:function(){return this.value}}}),w.extend(w.FX,{attr:function(a,b,d){if("object"==("undefined"==typeof a?"undefined":c(a)))for(var e in a)this.attr(e,a[e]);else this.add(a,b,"attrs");return this},style:function(a,b){if("object"==("undefined"==typeof a?"undefined":c(a)))for(var d in a)this.style(d,a[d]);else this.add(a,b,"styles");return this},x:function(a,b){if(this.target()instanceof w.G)return this.transform({x:a},b),this;var c=new w.Number(a);return c.relative=b,this.add("x",c)},y:function(a,b){if(this.target()instanceof w.G)return this.transform({y:a},b),this;var c=new w.Number(a);return c.relative=b,this.add("y",c)},cx:function(a){return this.add("cx",new w.Number(a))},cy:function(a){return this.add("cy",new w.Number(a))},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){if(this.target()instanceof w.Text)this.attr("font-size",a);else{var c;a&&b||(c=this.target().bbox()),a||(a=c.width/c.height*b),b||(b=c.height/c.width*a),this.add("width",new w.Number(a)).add("height",new w.Number(b))}return this},width:function(a){return this.add("width",new w.Number(a))},height:function(a){return this.add("height",new w.Number(a))},plot:function(a,b,c,d){return 4==arguments.length?this.plot([a,b,c,d]):this.add("plot",new(this.target().morphArray)(a))},leading:function(a){return this.target().leading?this.add("leading",new w.Number(a)):this},viewbox:function(a,b,c,d){return this.target()instanceof w.Container&&this.add("viewbox",new w.ViewBox(a,b,c,d)),this},update:function(a){if(this.target()instanceof w.Stop){if("number"==typeof a||a instanceof w.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",a.offset)}return this}}),w.Box=w.invent({create:function(a,b,d,e){return"object"!=("undefined"==typeof a?"undefined":c(a))||a instanceof w.Element?(4==arguments.length&&(this.x=a,this.y=b,this.width=d,this.height=e),void s(this)):w.Box.call(this,null!=a.left?a.left:a.x,null!=a.top?a.top:a.y,a.width,a.height)},extend:{merge:function(a){var b=new this.constructor;return b.x=Math.min(this.x,a.x),b.y=Math.min(this.y,a.y),b.width=Math.max(this.x+this.width,a.x+a.width)-b.x,b.height=Math.max(this.y+this.height,a.y+a.height)-b.y,s(b)},transform:function(a){var b,c=1/0,d=-(1/0),e=1/0,f=-(1/0),g=[new w.Point(this.x,this.y),new w.Point(this.x2,this.y),new w.Point(this.x,this.y2),new w.Point(this.x2,this.y2)];return g.forEach(function(b){b=b.transform(a),c=Math.min(c,b.x),d=Math.max(d,b.x),e=Math.min(e,b.y),f=Math.max(f,b.y)}),b=new this.constructor,b.x=c,b.width=d-c,b.y=e,b.height=f-e,s(b),b}}}),w.BBox=w.invent({create:function(a){if(w.Box.apply(this,[].slice.call(arguments)),a instanceof w.Element){var c;try{if(b.documentElement.contains){if(!b.documentElement.contains(a.node))throw new Exception("Element not in the dom")}else{for(var d=a.node;d.parentNode;)d=d.parentNode;if(d!=b)throw new Exception("Element not in the dom")}c=a.node.getBBox()}catch(e){if(a instanceof w.Shape){var f=a.clone(w.parser.draw.instance).show();c=f.node.getBBox(),f.remove()}else c={x:a.node.clientLeft,y:a.node.clientTop,width:a.node.clientWidth,height:a.node.clientHeight}}w.Box.call(this,c)}},inherit:w.Box,parent:w.Element,construct:{bbox:function(){return new w.BBox(this)}}}),w.BBox.prototype.constructor=w.BBox,w.extend(w.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),w.RBox=w.invent({create:function(a){w.Box.apply(this,[].slice.call(arguments)),a instanceof w.Element&&w.Box.call(this,a.node.getBoundingClientRect())},inherit:w.Box,parent:w.Element,extend:{addOffset:function(){return this.x+=a.pageXOffset,this.y+=a.pageYOffset,this}},construct:{rbox:function(a){return a?new w.RBox(this).transform(a.screenCTM().inverse()):new w.RBox(this).addOffset()}}}),w.RBox.prototype.constructor=w.RBox,w.Matrix=w.invent({create:function(a){var b,d=n([1,0,0,1,0,0]);for(a=a instanceof w.Element?a.matrixify():"string"==typeof a?n(a.split(w.regex.delimiter).map(parseFloat)):6==arguments.length?n([].slice.call(arguments)):Array.isArray(a)?n(a):"object"===("undefined"==typeof a?"undefined":c(a))?a:d,b=C.length-1;b>=0;--b)this[C[b]]=null!=a[C[b]]?a[C[b]]:d[C[b]]},extend:{extract:function(){var a=m(this,0,1),b=m(this,1,0),c=180/Math.PI*Math.atan2(a.y,a.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(c*Math.PI/180)+this.f*Math.sin(c*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(c*Math.PI/180)+this.e*Math.sin(-c*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-c,skewY:180/Math.PI*Math.atan2(b.y,b.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:c,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new w.Matrix(this)}},clone:function(){return new w.Matrix(this)},morph:function(a){return this.destination=new w.Matrix(a),this},at:function(a){if(!this.destination)return this;var b=new w.Matrix({a:this.a+(this.destination.a-this.a)*a,b:this.b+(this.destination.b-this.b)*a,c:this.c+(this.destination.c-this.c)*a,d:this.d+(this.destination.d-this.d)*a,e:this.e+(this.destination.e-this.e)*a,f:this.f+(this.destination.f-this.f)*a});return b},multiply:function(a){return new w.Matrix(this["native"]().multiply(o(a)["native"]()))},inverse:function(){return new w.Matrix(this["native"]().inverse());
},translate:function(a,b){return new w.Matrix(this["native"]().translate(a||0,b||0))},scale:function(a,b,c,d){return 1==arguments.length?b=a:3==arguments.length&&(d=c,c=b,b=a),this.around(c,d,new w.Matrix(a,0,0,b,0,0))},rotate:function(a,b,c){return a=w.utils.radians(a),this.around(b,c,new w.Matrix(Math.cos(a),Math.sin(a),(-Math.sin(a)),Math.cos(a),0,0))},flip:function(a,b){return"x"==a?this.scale(-1,1,b,0):"y"==a?this.scale(1,-1,0,b):this.scale(-1,-1,a,null!=b?b:a)},skew:function(a,b,c,d){return 1==arguments.length?b=a:3==arguments.length&&(d=c,c=b,b=a),a=w.utils.radians(a),b=w.utils.radians(b),this.around(c,d,new w.Matrix(1,Math.tan(b),Math.tan(a),1,0,0))},skewX:function(a,b,c){return this.skew(a,0,b,c)},skewY:function(a,b,c){return this.skew(0,a,b,c)},around:function(a,b,c){return this.multiply(new w.Matrix(1,0,0,1,a||0,b||0)).multiply(c).multiply(new w.Matrix(1,0,0,1,-a||0,-b||0))},"native":function(){for(var a=w.parser["native"].createSVGMatrix(),b=C.length-1;b>=0;b--)a[C[b]]=this[C[b]];return a},toString:function(){return"matrix("+u(this.a)+","+u(this.b)+","+u(this.c)+","+u(this.d)+","+u(this.e)+","+u(this.f)+")"}},parent:w.Element,construct:{ctm:function(){return new w.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof w.Nested){var a=this.rect(1,1),b=a.node.getScreenCTM();return a.remove(),new w.Matrix(b)}return new w.Matrix(this.node.getScreenCTM())}}}),w.Point=w.invent({create:function(a,b){var d,e={x:0,y:0};d=Array.isArray(a)?{x:a[0],y:a[1]}:"object"===("undefined"==typeof a?"undefined":c(a))?{x:a.x,y:a.y}:null!=a?{x:a,y:null!=b?b:a}:e,this.x=d.x,this.y=d.y},extend:{clone:function(){return new w.Point(this)},morph:function(a,b){return this.destination=new w.Point(a,b),this},at:function(a){if(!this.destination)return this;var b=new w.Point({x:this.x+(this.destination.x-this.x)*a,y:this.y+(this.destination.y-this.y)*a});return b},"native":function(){var a=w.parser["native"].createSVGPoint();return a.x=this.x,a.y=this.y,a},transform:function(a){return new w.Point(this["native"]().matrixTransform(a["native"]()))}}}),w.extend(w.Element,{point:function(a,b){return new w.Point(a,b).transform(this.screenCTM().inverse())}}),w.extend(w.Element,{attr:function(a,b,d){if(null==a){for(a={},b=this.node.attributes,d=b.length-1;d>=0;d--)a[b[d].nodeName]=w.regex.isNumber.test(b[d].nodeValue)?parseFloat(b[d].nodeValue):b[d].nodeValue;return a}if("object"==("undefined"==typeof a?"undefined":c(a)))for(b in a)this.attr(b,a[b]);else if(null===b)this.node.removeAttribute(a);else{if(null==b)return b=this.node.getAttribute(a),null==b?w.defaults.attrs[a]:w.regex.isNumber.test(b)?parseFloat(b):b;"stroke-width"==a?this.attr("stroke",parseFloat(b)>0?this._stroke:null):"stroke"==a&&(this._stroke=b),"fill"!=a&&"stroke"!=a||(w.regex.isImage.test(b)&&(b=this.doc().defs().image(b,0,0)),b instanceof w.Image&&(b=this.doc().defs().pattern(0,0,function(){this.add(b)}))),"number"==typeof b?b=new w.Number(b):w.Color.isColor(b)?b=new w.Color(b):Array.isArray(b)&&(b=new w.Array(b)),"leading"==a?this.leading&&this.leading(b):"string"==typeof d?this.node.setAttributeNS(d,a,b.toString()):this.node.setAttribute(a,b.toString()),!this.rebuild||"font-size"!=a&&"x"!=a||this.rebuild(a,b)}return this}}),w.extend(w.Element,{transform:function(a,b){var d,e,f=this;if("object"!==("undefined"==typeof a?"undefined":c(a)))return d=new w.Matrix(f).extract(),"string"==typeof a?d[a]:d;if(d=new w.Matrix(f),b=!!b||!!a.relative,null!=a.a)d=b?d.multiply(new w.Matrix(a)):new w.Matrix(a);else if(null!=a.rotation)p(a,f),d=b?d.rotate(a.rotation,a.cx,a.cy):d.rotate(a.rotation-d.extract().rotation,a.cx,a.cy);else if(null!=a.scale||null!=a.scaleX||null!=a.scaleY){if(p(a,f),a.scaleX=null!=a.scale?a.scale:null!=a.scaleX?a.scaleX:1,a.scaleY=null!=a.scale?a.scale:null!=a.scaleY?a.scaleY:1,!b){var g=d.extract();a.scaleX=1*a.scaleX/g.scaleX,a.scaleY=1*a.scaleY/g.scaleY}d=d.scale(a.scaleX,a.scaleY,a.cx,a.cy)}else if(null!=a.skew||null!=a.skewX||null!=a.skewY){if(p(a,f),a.skewX=null!=a.skew?a.skew:null!=a.skewX?a.skewX:0,a.skewY=null!=a.skew?a.skew:null!=a.skewY?a.skewY:0,!b){var g=d.extract();d=d.multiply((new w.Matrix).skew(g.skewX,g.skewY,a.cx,a.cy).inverse())}d=d.skew(a.skewX,a.skewY,a.cx,a.cy)}else a.flip?("x"==a.flip||"y"==a.flip?a.offset=null==a.offset?f.bbox()["c"+a.flip]:a.offset:null==a.offset?(e=f.bbox(),a.flip=e.cx,a.offset=e.cy):a.flip=a.offset,d=(new w.Matrix).flip(a.flip,a.offset)):null==a.x&&null==a.y||(b?d=d.translate(a.x,a.y):(null!=a.x&&(d.e=a.x),null!=a.y&&(d.f=a.y)));return this.attr("transform",d)}}),w.extend(w.FX,{transform:function(a,b){var d,e,f=this.target();return"object"!==("undefined"==typeof a?"undefined":c(a))?(d=new w.Matrix(f).extract(),"string"==typeof a?d[a]:d):(b=!!b||!!a.relative,null!=a.a?d=new w.Matrix(a):null!=a.rotation?(p(a,f),d=new w.Rotate(a.rotation,a.cx,a.cy)):null!=a.scale||null!=a.scaleX||null!=a.scaleY?(p(a,f),a.scaleX=null!=a.scale?a.scale:null!=a.scaleX?a.scaleX:1,a.scaleY=null!=a.scale?a.scale:null!=a.scaleY?a.scaleY:1,d=new w.Scale(a.scaleX,a.scaleY,a.cx,a.cy)):null!=a.skewX||null!=a.skewY?(p(a,f),a.skewX=null!=a.skewX?a.skewX:0,a.skewY=null!=a.skewY?a.skewY:0,d=new w.Skew(a.skewX,a.skewY,a.cx,a.cy)):a.flip?("x"==a.flip||"y"==a.flip?a.offset=null==a.offset?f.bbox()["c"+a.flip]:a.offset:null==a.offset?(e=f.bbox(),a.flip=e.cx,a.offset=e.cy):a.flip=a.offset,d=(new w.Matrix).flip(a.flip,a.offset)):null==a.x&&null==a.y||(d=new w.Translate(a.x,a.y)),d?(d.relative=b,this.last().transforms.push(d),this._callStart()):this)}}),w.extend(w.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var a=(this.attr("transform")||"").split(w.regex.transforms).slice(0,-1).map(function(a){var b=a.trim().split("(");return[b[0],b[1].split(w.regex.delimiter).map(function(a){return parseFloat(a)})]}).reduce(function(a,b){return"matrix"==b[0]?a.multiply(n(b[1])):a[b[0]].apply(a,b[1])},new w.Matrix);return a},toParent:function(a){if(this==a)return this;var b=this.screenCTM(),c=a.screenCTM().inverse();return this.addTo(a).untransform().transform(c.multiply(b)),this},toDoc:function(){return this.toParent(this.doc())}}),w.Transformation=w.invent({create:function(a,b){if(arguments.length>1&&"boolean"!=typeof b)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(a))for(var d=0,e=this.arguments.length;d<e;++d)this[this.arguments[d]]=a[d];else if("object"==("undefined"==typeof a?"undefined":c(a)))for(var d=0,e=this.arguments.length;d<e;++d)this[this.arguments[d]]=a[this.arguments[d]];this.inversed=!1,b===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(a){for(var b=[],c=0,d=this.arguments.length;c<d;++c)b.push(this[this.arguments[c]]);var e=this._undo||new w.Matrix;return e=(new w.Matrix).morph(w.Matrix.prototype[this.method].apply(e,b)).at(a),this.inversed?e.inverse():e},undo:function(a){for(var b=0,c=this.arguments.length;b<c;++b)a[this.arguments[b]]="undefined"==typeof this[this.arguments[b]]?0:a[this.arguments[b]];return a.cx=this.cx,a.cy=this.cy,this._undo=new(w[i(this.method)])(a,(!0)).at(1),this}}}),w.Translate=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(a,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),w.Rotate=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(a,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(a){var b=(new w.Matrix).rotate((new w.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(a),this.cx,this.cy);return this.inversed?b.inverse():b},undo:function(a){return this._undo=a,this}}}),w.Scale=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(a,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),w.Skew=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(a,b){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),w.extend(w.Element,{style:function(a,b){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==("undefined"==typeof a?"undefined":c(a)))for(b in a)this.style(b,a[b]);else{if(!w.regex.isCss.test(a))return this.node.style[h(a)];for(a=a.split(/\s*;\s*/).filter(function(a){return!!a}).map(function(a){return a.split(/\s*:\s*/)});b=a.pop();)this.style(b[0],b[1])}else this.node.style[h(a)]=null===b||w.regex.isBlank.test(b)?"":b;return this}}),w.Parent=w.invent({create:function(a){this.constructor.call(this,a)},inherit:w.Element,extend:{children:function(){return w.utils.map(w.utils.filterSVGElements(this.node.childNodes),function(a){return w.adopt(a)})},add:function(a,b){return null==b?this.node.appendChild(a.node):a.node!=this.node.childNodes[b]&&this.node.insertBefore(a.node,this.node.childNodes[b]),this},put:function(a,b){return this.add(a,b),a},has:function(a){return this.index(a)>=0},index:function(a){return[].slice.call(this.node.childNodes).indexOf(a.node)},get:function(a){return w.adopt(this.node.childNodes[a])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(a,b){var c,d,e=this.children();for(c=0,d=e.length;c<d;c++)e[c]instanceof w.Element&&a.apply(e[c],[c,e]),b&&e[c]instanceof w.Container&&e[c].each(a,b);return this},removeElement:function(a){return this.node.removeChild(a.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),w.extend(w.Parent,{ungroup:function(a,b){return 0===b||this instanceof w.Defs||this.node==w.parser.draw?this:(a=a||(this instanceof w.Doc?this:this.parent(w.Parent)),b=b||1/0,this.each(function(){return this instanceof w.Defs?this:this instanceof w.Parent?this.ungroup(a,b-1):this.toParent(a)}),this.node.firstChild||this.remove(),this)},flatten:function(a,b){return this.ungroup(a,b)}}),w.Container=w.invent({create:function(a){this.constructor.call(this,a)},inherit:w.Parent}),w.ViewBox=w.invent({create:function(a){var b,d,e,f,g,h,i,j,k=[0,0,0,0],l=1,m=1,n=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(a instanceof w.Element){for(i=a,j=a,h=(a.attr("viewBox")||"").match(n),g=a.bbox,e=new w.Number(a.width()),f=new w.Number(a.height());"%"==e.unit;)l*=e.value,e=new w.Number(i instanceof w.Doc?i.parent().offsetWidth:i.parent().width()),i=i.parent();for(;"%"==f.unit;)m*=f.value,f=new w.Number(j instanceof w.Doc?j.parent().offsetHeight:j.parent().height()),j=j.parent();this.x=0,this.y=0,this.width=e*l,this.height=f*m,this.zoom=1,h&&(b=parseFloat(h[0]),d=parseFloat(h[1]),e=parseFloat(h[2]),f=parseFloat(h[3]),this.zoom=this.width/this.height>e/f?this.height/f:this.width/e,this.x=b,this.y=d,this.width=e,this.height=f)}else a="string"==typeof a?a.match(n).map(function(a){return parseFloat(a)}):Array.isArray(a)?a:"object"==("undefined"==typeof a?"undefined":c(a))?[a.x,a.y,a.width,a.height]:4==arguments.length?[].slice.call(arguments):k,this.x=a[0],this.y=a[1],this.width=a[2],this.height=a[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(a,b,c,d){return this.destination=new w.ViewBox(a,b,c,d),this},at:function(a){return this.destination?new w.ViewBox([this.x+(this.destination.x-this.x)*a,this.y+(this.destination.y-this.y)*a,this.width+(this.destination.width-this.width)*a,this.height+(this.destination.height-this.height)*a]):this}},parent:w.Container,construct:{viewbox:function(a,b,c,d){return 0==arguments.length?new w.ViewBox(this):this.attr("viewBox",new w.ViewBox(a,b,c,d))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(a){w.Element.prototype[a]=function(b){return w.on(this.node,a,b),this}}),w.listeners=[],w.handlerMap=[],w.listenerId=0,w.on=function(a,b,c,d,e){var f=c.bind(d||a.instance||a),g=(w.handlerMap.indexOf(a)+1||w.handlerMap.push(a))-1,h=b.split(".")[0],i=b.split(".")[1]||"*";w.listeners[g]=w.listeners[g]||{},w.listeners[g][h]=w.listeners[g][h]||{},w.listeners[g][h][i]=w.listeners[g][h][i]||{},c._svgjsListenerId||(c._svgjsListenerId=++w.listenerId),w.listeners[g][h][i][c._svgjsListenerId]=f,a.addEventListener(h,f,e||!1)},w.off=function(a,b,c){var d=w.handlerMap.indexOf(a),e=b&&b.split(".")[0],f=b&&b.split(".")[1],g="";if(d!=-1)if(c){if("function"==typeof c&&(c=c._svgjsListenerId),!c)return;w.listeners[d][e]&&w.listeners[d][e][f||"*"]&&(a.removeEventListener(e,w.listeners[d][e][f||"*"][c],!1),delete w.listeners[d][e][f||"*"][c])}else if(f&&e){if(w.listeners[d][e]&&w.listeners[d][e][f]){for(c in w.listeners[d][e][f])w.off(a,[e,f].join("."),c);delete w.listeners[d][e][f]}}else if(f)for(b in w.listeners[d])for(g in w.listeners[d][b])f===g&&w.off(a,[b,f].join("."));else if(e){if(w.listeners[d][e]){for(g in w.listeners[d][e])w.off(a,[e,g].join("."));delete w.listeners[d][e]}}else{for(b in w.listeners[d])w.off(a,b);delete w.listeners[d],delete w.handlerMap[d]}},w.extend(w.Element,{on:function(a,b,c,d){return w.on(this.node,a,b,c,d),this},off:function(a,b){return w.off(this.node,a,b),this},fire:function(b,c){return b instanceof a.Event?this.node.dispatchEvent(b):this.node.dispatchEvent(b=new w.CustomEvent(b,{detail:c,cancelable:!0})),this._event=b,this},event:function(){return this._event}}),w.Defs=w.invent({create:"defs",inherit:w.Container}),w.G=w.invent({create:"g",inherit:w.Container,extend:{x:function(a){return null==a?this.transform("x"):this.transform({x:a-this.x()},!0)},y:function(a){return null==a?this.transform("y"):this.transform({y:a-this.y()},!0)},cx:function(a){return null==a?this.gbox().cx:this.x(a-this.gbox().width/2)},cy:function(a){return null==a?this.gbox().cy:this.y(a-this.gbox().height/2)},gbox:function(){var a=this.bbox(),b=this.transform();return a.x+=b.x,a.x2+=b.x,a.cx+=b.x,a.y+=b.y,a.y2+=b.y,a.cy+=b.y,a}},construct:{group:function(){return this.put(new w.G)}}}),w.Doc=w.invent({create:function(a){a&&(a="string"==typeof a?b.getElementById(a):a,"svg"==a.nodeName?this.constructor.call(this,a):(this.constructor.call(this,w.create("svg")),a.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:w.Container,extend:{namespace:function(){return this.attr({xmlns:w.ns,version:"1.1"}).attr("xmlns:xlink",w.xlink,w.xmlns).attr("xmlns:svgjs",w.svgjs,w.xmlns)},defs:function J(){if(!this._defs){var J;(J=this.node.getElementsByTagName("defs")[0])?this._defs=w.adopt(J):this._defs=new w.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var a=this.node.getScreenCTM();return a&&this.style("left",-a.e%1+"px").style("top",-a.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,w.parser.draw.parentNode||this.node.appendChild(w.parser.draw),this},clone:function K(a){this.writeDataToDom();var b=this.node,K=r(b.cloneNode(!0));return a?(a.node||a).appendChild(K.node):b.parentNode.insertBefore(K.node,b.nextSibling),K}}}),w.extend(w.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var a=this.position()+1,b=this.parent();return b.removeElement(this).add(this,a),b instanceof w.Doc&&b.node.appendChild(b.defs().node),this},backward:function(){var a=this.position();return a>0&&this.parent().removeElement(this).add(this,a-1),this},front:function(){var a=this.parent();return a.node.appendChild(this.node),a instanceof w.Doc&&a.node.appendChild(a.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(a){a.remove();var b=this.position();return this.parent().add(a,b),this},after:function(a){a.remove();var b=this.position();return this.parent().add(a,b+1),this}}),w.Mask=w.invent({create:function(){this.constructor.call(this,w.create("mask")),this.targets=[]},inherit:w.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unmask();return this.targets=[],w.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new w.Mask)}}}),w.extend(w.Element,{maskWith:function(a){return this.masker=a instanceof w.Mask?a:this.parent().mask().add(a),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),w.ClipPath=w.invent({create:function(){this.constructor.call(this,w.create("clipPath")),this.targets=[]},inherit:w.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new w.ClipPath)}}}),w.extend(w.Element,{clipWith:function(a){return this.clipper=a instanceof w.ClipPath?a:this.parent().clip().add(a),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),w.Gradient=w.invent({create:function(a){this.constructor.call(this,w.create(a+"Gradient")),this.type=a},inherit:w.Container,extend:{at:function(a,b,c){return this.put(new w.Stop).update(a,b,c)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(a,b,c){return"transform"==a&&(a="gradientTransform"),w.Container.prototype.attr.call(this,a,b,c)}},construct:{gradient:function(a,b){return this.defs().gradient(a,b)}}}),w.extend(w.Gradient,w.FX,{from:function(a,b){return"radial"==(this._target||this).type?this.attr({fx:new w.Number(a),fy:new w.Number(b)}):this.attr({x1:new w.Number(a),y1:new w.Number(b)})},to:function(a,b){return"radial"==(this._target||this).type?this.attr({cx:new w.Number(a),cy:new w.Number(b)}):this.attr({x2:new w.Number(a),y2:new w.Number(b)})}}),w.extend(w.Defs,{gradient:function(a,b){return this.put(new w.Gradient(a)).update(b)}}),w.Stop=w.invent({create:"stop",inherit:w.Element,extend:{update:function(a){return("number"==typeof a||a instanceof w.Number)&&(a={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new w.Number(a.offset)),this}}}),w.Pattern=w.invent({create:"pattern",inherit:w.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return this.fill()},attr:function(a,b,c){return"transform"==a&&(a="patternTransform"),w.Container.prototype.attr.call(this,a,b,c)}},construct:{pattern:function(a,b,c){return this.defs().pattern(a,b,c)}}}),w.extend(w.Defs,{pattern:function(a,b,c){return this.put(new w.Pattern).update(c).attr({x:0,y:0,width:a,height:b,patternUnits:"userSpaceOnUse"})}}),w.Shape=w.invent({create:function(a){this.constructor.call(this,a)},inherit:w.Element}),w.Bare=w.invent({create:function(a,b){if(this.constructor.call(this,w.create(a)),b)for(var c in b.prototype)"function"==typeof b.prototype[c]&&(this[c]=b.prototype[c])},inherit:w.Element,extend:{words:function(a){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(b.createTextNode(a)),this}}}),w.extend(w.Parent,{element:function(a,b){return this.put(new w.Bare(a,b))}}),w.Symbol=w.invent({create:"symbol",inherit:w.Container,construct:{symbol:function(){return this.put(new w.Symbol)}}}),w.Use=w.invent({create:"use",inherit:w.Shape,extend:{element:function(a,b){return this.attr("href",(b||"")+"#"+a,w.xlink)}},construct:{use:function(a,b){return this.put(new w.Use).element(a,b)}}}),w.Rect=w.invent({create:"rect",inherit:w.Shape,construct:{rect:function(a,b){return this.put(new w.Rect).size(a,b)}}}),w.Circle=w.invent({create:"circle",inherit:w.Shape,construct:{circle:function(a){return this.put(new w.Circle).rx(new w.Number(a).divide(2)).move(0,0)}}}),w.extend(w.Circle,w.FX,{rx:function(a){return this.attr("r",a)},ry:function(a){return this.rx(a)}}),w.Ellipse=w.invent({create:"ellipse",inherit:w.Shape,construct:{ellipse:function(a,b){return this.put(new w.Ellipse).size(a,b).move(0,0)}}}),w.extend(w.Ellipse,w.Rect,w.FX,{rx:function(a){return this.attr("rx",a)},ry:function(a){return this.attr("ry",a)}}),w.extend(w.Circle,w.Ellipse,{x:function(a){return null==a?this.cx()-this.rx():this.cx(a+this.rx())},y:function(a){return null==a?this.cy()-this.ry():this.cy(a+this.ry())},cx:function(a){return null==a?this.attr("cx"):this.attr("cx",a)},cy:function(a){return null==a?this.attr("cy"):this.attr("cy",a)},width:function(a){return null==a?2*this.rx():this.rx(new w.Number(a).divide(2))},height:function(a){return null==a?2*this.ry():this.ry(new w.Number(a).divide(2))},size:function(a,b){var c=l(this,a,b);return this.rx(new w.Number(c.width).divide(2)).ry(new w.Number(c.height).divide(2))}}),w.Line=w.invent({create:"line",inherit:w.Shape,extend:{array:function(){return new w.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(a,b,c,d){return null==a?this.array():(a="undefined"!=typeof b?{x1:a,y1:b,x2:c,y2:d}:new w.PointArray(a).toLine(),this.attr(a))},move:function(a,b){return this.attr(this.array().move(a,b).toLine())},size:function(a,b){var c=l(this,a,b);return this.attr(this.array().size(c.width,c.height).toLine())}},construct:{line:function(a,b,c,d){return w.Line.prototype.plot.apply(this.put(new w.Line),null!=a?[a,b,c,d]:[0,0,0,0])}}}),w.Polyline=w.invent({create:"polyline",inherit:w.Shape,construct:{polyline:function(a){return this.put(new w.Polyline).plot(a||new w.PointArray)}}}),w.Polygon=w.invent({create:"polygon",inherit:w.Shape,construct:{polygon:function(a){return this.put(new w.Polygon).plot(a||new w.PointArray)}}}),w.extend(w.Polyline,w.Polygon,{array:function(){return this._array||(this._array=new w.PointArray(this.attr("points")))},plot:function(a){return null==a?this.array():this.clear().attr("points","string"==typeof a?a:this._array=new w.PointArray(a))},clear:function(){return delete this._array,this},move:function(a,b){return this.attr("points",this.array().move(a,b))},size:function(a,b){var c=l(this,a,b);return this.attr("points",this.array().size(c.width,c.height))}}),w.extend(w.Line,w.Polyline,w.Polygon,{morphArray:w.PointArray,x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},width:function(a){var b=this.bbox();return null==a?b.width:this.size(a,b.height)},height:function(a){var b=this.bbox();return null==a?b.height:this.size(b.width,a)}}),w.Path=w.invent({create:"path",inherit:w.Shape,extend:{morphArray:w.PathArray,array:function(){return this._array||(this._array=new w.PathArray(this.attr("d")))},plot:function(a){return null==a?this.array():this.clear().attr("d","string"==typeof a?a:this._array=new w.PathArray(a))},clear:function(){return delete this._array,this},move:function(a,b){return this.attr("d",this.array().move(a,b))},x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},size:function(a,b){var c=l(this,a,b);return this.attr("d",this.array().size(c.width,c.height))},width:function(a){return null==a?this.bbox().width:this.size(a,this.bbox().height)},height:function(a){return null==a?this.bbox().height:this.size(this.bbox().width,a)}},construct:{path:function(a){return this.put(new w.Path).plot(a||new w.PathArray)}}}),w.Image=w.invent({create:"image",inherit:w.Shape,extend:{load:function(b){if(!b)return this;var c=this,d=new a.Image;return w.on(d,"load",function(){w.off(d);var a=c.parent(w.Pattern);null!==a&&(0==c.width()&&0==c.height()&&c.size(d.width,d.height),a&&0==a.width()&&0==a.height()&&a.size(c.width(),c.height()),"function"==typeof c._loaded&&c._loaded.call(c,{width:d.width,height:d.height,ratio:d.width/d.height,url:b}))}),w.on(d,"error",function(a){w.off(d),"function"==typeof c._error&&c._error.call(c,a)}),this.attr("href",d.src=this.src=b,w.xlink)},loaded:function(a){return this._loaded=a,this},error:function(a){return this._error=a,this}},construct:{image:function(a,b,c){return this.put(new w.Image).load(a).size(b||0,c||b||0)}}}),w.Text=w.invent({create:function(){this.constructor.call(this,w.create("text")),this.dom.leading=new w.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",w.defaults.attrs["font-family"])},inherit:w.Shape,extend:{x:function(a){return null==a?this.attr("x"):this.attr("x",a)},y:function(a){var b=this.attr("y"),c="number"==typeof b?b-this.bbox().y:0;return null==a?"number"==typeof b?b-c:b:this.attr("y","number"==typeof a.valueOf()?a+c:a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)},text:function L(L){if("undefined"==typeof L){for(var L="",a=this.node.childNodes,b=0,c=a.length;b<c;++b)0!=b&&3!=a[b].nodeType&&1==w.adopt(a[b]).dom.newLined&&(L+="\n"),L+=a[b].textContent;return L}if(this.clear().build(!0),"function"==typeof L)L.call(this,this);else{L=L.split("\n");for(var b=0,d=L.length;b<d;b++)this.tspan(L[b]).newLine()}return this.build(!1).rebuild()},size:function(a){return this.attr("font-size",a).rebuild()},leading:function(a){return null==a?this.dom.leading:(this.dom.leading=new w.Number(a),this.rebuild())},lines:function M(){var a=(this.textPath&&this.textPath()||this).node,M=w.utils.map(w.utils.filterSVGElements(a.childNodes),function(a){return w.adopt(a)});return new w.Set(M)},rebuild:function(a){if("boolean"==typeof a&&(this._rebuild=a),this._rebuild){var b=this,c=0,d=this.dom.leading*new w.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(b.textPath()||this.attr("x",b.attr("x")),"\n"==this.text()?c+=d:(this.attr("dy",d+c),c=0))}),this.fire("rebuild")}return this},build:function(a){return this._build=!!a,this},setData:function(a){return this.dom=a,this.dom.leading=new w.Number(a.leading||1.3),this}},construct:{text:function(a){return this.put(new w.Text).text(a)},plain:function(a){return this.put(new w.Text).plain(a)}}}),w.Tspan=w.invent({create:"tspan",inherit:w.Shape,extend:{text:function(a){return null==a?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof a?a.call(this,this):this.plain(a),this)},dx:function(a){return this.attr("dx",a)},dy:function(a){return this.attr("dy",a)},newLine:function(){var a=this.parent(w.Text);return this.dom.newLined=!0,this.dy(a.dom.leading*a.attr("font-size")).attr("x",a.x())}}}),w.extend(w.Text,w.Tspan,{plain:function(a){return this._build===!1&&this.clear(),this.node.appendChild(b.createTextNode(a)),this},tspan:function N(a){var b=(this.textPath&&this.textPath()||this).node,N=new w.Tspan;return this._build===!1&&this.clear(),b.appendChild(N.node),N.text(a)},clear:function(){for(var a=(this.textPath&&this.textPath()||this).node;a.hasChildNodes();)a.removeChild(a.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),w.TextPath=w.invent({create:"textPath",inherit:w.Parent,parent:w.Text,construct:{morphArray:w.PathArray,path:function O(a){for(var O=new w.TextPath,b=this.doc().defs().path(a);this.node.hasChildNodes();)O.node.appendChild(this.node.firstChild);return this.node.appendChild(O.node),O.attr("href","#"+b,w.xlink),this},array:function(){var a=this.track();return a?a.array():null},plot:function(a){var b=this.track(),c=null;return b&&(c=b.plot(a)),null==a?c:this},track:function(){var a=this.textPath();if(a)return a.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return w.adopt(this.node.firstChild)}}}),w.Nested=w.invent({create:function(){this.constructor.call(this,w.create("svg")),this.style("overflow","visible")},inherit:w.Container,construct:{nested:function(){return this.put(new w.Nested)}}}),w.A=w.invent({create:"a",inherit:w.Container,extend:{to:function(a){return this.attr("href",a,w.xlink)},show:function(a){return this.attr("show",a,w.xlink)},target:function(a){return this.attr("target",a)}},construct:{link:function(a){return this.put(new w.A).to(a)}}}),w.extend(w.Element,{linkTo:function(a){var b=new w.A;return"function"==typeof a?a.call(b,b):b.to(a),this.parent().put(b).put(this)}}),w.Marker=w.invent({create:"marker",inherit:w.Container,extend:{width:function(a){return this.attr("markerWidth",a)},height:function(a){return this.attr("markerHeight",a)},ref:function(a,b){return this.attr("refX",a).attr("refY",b)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(a,b,c){return this.defs().marker(a,b,c)}}}),w.extend(w.Defs,{marker:function(a,b,c){return this.put(new w.Marker).size(a,b).ref(a/2,b/2).viewbox(0,0,a,b).attr("orient","auto").update(c)}}),w.extend(w.Line,w.Polyline,w.Polygon,w.Path,{marker:function(a,b,c,d){var e=["marker"];return"all"!=a&&e.push(a),e=e.join("-"),a=arguments[1]instanceof w.Marker?arguments[1]:this.doc().marker(b,c,d),this.attr(e,a)}});var B={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(a,b){return"color"==b?a:a+"-"+b}};["fill","stroke"].forEach(function(a){var b,c={};c[a]=function(c){if("undefined"==typeof c)return this;if("string"==typeof c||w.Color.isRgb(c)||c&&"function"==typeof c.fill)this.attr(a,c);else for(b=B[a].length-1;b>=0;b--)null!=c[B[a][b]]&&this.attr(B.prefix(a,B[a][b]),c[B[a][b]]);return this},w.extend(w.Element,w.FX,c)}),w.extend(w.Element,w.FX,{rotate:function(a,b,c){return this.transform({rotation:a,cx:b,cy:c})},skew:function(a,b,c,d){return 1==arguments.length||3==arguments.length?this.transform({skew:a,cx:b,cy:c}):this.transform({skewX:a,skewY:b,cx:c,cy:d})},scale:function(a,b,c,d){return 1==arguments.length||3==arguments.length?this.transform({scale:a,cx:b,cy:c}):this.transform({scaleX:a,scaleY:b,cx:c,cy:d})},translate:function(a,b){return this.transform({x:a,y:b})},flip:function(a,b){return b="number"==typeof a?a:b,this.transform({flip:a||"both",offset:b})},matrix:function(a){return this.attr("transform",new w.Matrix(6==arguments.length?[].slice.call(arguments):a))},opacity:function(a){return this.attr("opacity",a)},dx:function(a){return this.x(new w.Number(a).plus(this instanceof w.FX?0:this.x()),!0)},dy:function(a){return this.y(new w.Number(a).plus(this instanceof w.FX?0:this.y()),!0)},dmove:function(a,b){return this.dx(a).dy(b)}}),w.extend(w.Rect,w.Ellipse,w.Circle,w.Gradient,w.FX,{radius:function(a,b){var c=(this._target||this).type;return"radial"==c||"circle"==c?this.attr("r",new w.Number(a)):this.rx(a).ry(null==b?a:b)}}),w.extend(w.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(a){return this.node.getPointAtLength(a)}}),w.extend(w.Parent,w.Text,w.Tspan,w.FX,{font:function(a,b){if("object"==("undefined"==typeof a?"undefined":c(a)))for(b in a)this.font(b,a[b]);return"leading"==a?this.leading(b):"anchor"==a?this.attr("text-anchor",b):"size"==a||"family"==a||"weight"==a||"stretch"==a||"variant"==a||"style"==a?this.attr("font-"+a,b):this.attr(a,b)}}),w.Set=w.invent({create:function(a){Array.isArray(a)?this.members=a:this.clear()},extend:{add:function(){
var a,b,c=[].slice.call(arguments);for(a=0,b=c.length;a<b;a++)this.members.push(c[a]);return this},remove:function(a){var b=this.index(a);return b>-1&&this.members.splice(b,1),this},each:function(a){for(var b=0,c=this.members.length;b<c;b++)a.apply(this.members[b],[b,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(a){return this.index(a)>=0},index:function(a){return this.members.indexOf(a)},get:function(a){return this.members[a]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new w.RBox;var a=this.members[0].rbox(this.members[0].doc());return this.each(function(){a=a.merge(this.rbox(this.doc()))}),a}},construct:{set:function(a){return new w.Set(a)}}}),w.FX.Set=w.invent({create:function(a){this.set=a}}),w.Set.inherit=function(){var a,b=[];for(var a in w.Shape.prototype)"function"==typeof w.Shape.prototype[a]&&"function"!=typeof w.Set.prototype[a]&&b.push(a);b.forEach(function(a){w.Set.prototype[a]=function(){for(var b=0,c=this.members.length;b<c;b++)this.members[b]&&"function"==typeof this.members[b][a]&&this.members[b][a].apply(this.members[b],arguments);return"animate"==a?this.fx||(this.fx=new w.FX.Set(this)):this}}),b=[];for(var a in w.FX.prototype)"function"==typeof w.FX.prototype[a]&&"function"!=typeof w.FX.Set.prototype[a]&&b.push(a);b.forEach(function(a){w.FX.Set.prototype[a]=function(){for(var b=0,c=this.set.members.length;b<c;b++)this.set.members[b].fx[a].apply(this.set.members[b].fx,arguments);return this}})},w.extend(w.Element,{data:function(a,b,d){if("object"==("undefined"==typeof a?"undefined":c(a)))for(b in a)this.data(b,a[b]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch(e){return this.attr("data-"+a)}else this.attr("data-"+a,null===b?null:d===!0||"string"==typeof b||"number"==typeof b?b:JSON.stringify(b));return this}}),w.extend(w.Element,{remember:function(a,b){if("object"==c(arguments[0]))for(var b in a)this.remember(b,a[b]);else{if(1==arguments.length)return this.memory()[a];this.memory()[a]=b}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var a=arguments.length-1;a>=0;a--)delete this.memory()[arguments[a]];return this},memory:function(){return this._memory||(this._memory={})}}),w.get=function(a){var c=b.getElementById(t(a)||a);return w.adopt(c)},w.select=function(a,c){return new w.Set(w.utils.map((c||b).querySelectorAll(a),function(a){return w.adopt(a)}))},w.extend(w.Parent,{select:function(a){return w.select(a,this.node)}});var C="abcdef".split("");if("function"!=typeof a.CustomEvent){var D=function(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=b.createEvent("CustomEvent");return d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),d};D.prototype=a.Event.prototype,w.CustomEvent=D}else w.CustomEvent=a.CustomEvent;return function(b){for(var c=0,d=["moz","webkit"],e=0;e<d.length&&!a.requestAnimationFrame;++e)b.requestAnimationFrame=b[d[e]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[d[e]+"CancelAnimationFrame"]||b[d[e]+"CancelRequestAnimationFrame"];b.requestAnimationFrame=b.requestAnimationFrame||function(a){var d=(new Date).getTime(),e=Math.max(0,16-(d-c)),f=b.setTimeout(function(){a(d+e)},e);return c=d+e,f},b.cancelAnimationFrame=b.cancelAnimationFrame||b.clearTimeout}(a),w})}}});
//# sourceMappingURL=svg.js.map