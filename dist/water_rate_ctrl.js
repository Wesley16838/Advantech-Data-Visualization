"use strict";System.register(["app/plugins/sdk","app/core/utils/kbn","lodash","./svg.js","jquery","./fontsize"],function(a,b){function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h,i,j,k,l,m,n,o,p;return{setters:[function(a){h=a.MetricsPanelCtrl},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a},function(a){l=a["default"]},function(a){m=a["default"]}],execute:function(){n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("WaterRate",p=function(a){function b($scope,$injector,$rootScope){var a;e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,$scope,$injector));c.$rootScope=$rootScope,c.hiddenSeries={},c.dataType="timeseries",c.dictFontCalc={},c.unitFormats="",c.dateTime=(new Date).getTime(),c.timestamp=Math.floor(c.dateTime/100),c.fontCalc=m.defaultValues,c.fontCalc.forEach(function(a,b){c.dictFontCalc[c.fontCalc[b].text]=c.fontCalc[b]});var g=(a={ratiotitleSize:"120%",ratiovalueSize:"200%",processedvalueSize:"120%",processedtitleSize:"120%",exceptedtitleSize:"120%",exceptedvalueSize:"120%",WaterType:"original",dataSetting:[]},d(a,"WaterType","original"),d(a,"iconType","none"),d(a,"language","en"),d(a,"radarId","drawing"+c.timestamp),d(a,"radarToolTipId","tooltips-"+c.panel.radarId),d(a,"rowDatas",{}),d(a,"lang",""),d(a,"rowData",[]),d(a,"tagsNum",0),d(a,"tagsName",[]),d(a,"tagsValue",[]),d(a,"tagsNameEdited",[]),d(a,"tagsNameCombine",[]),d(a,"exceptedfontSize","100%"),d(a,"processedfontSize","100%"),d(a,"circlefontSize","100%"),d(a,"seperateSize","100%"),d(a,"seperateColor","#00ffff"),d(a,"exceptedcssFontSize","27px"),d(a,"processedcssFontSize","27px"),d(a,"processedcssvalueSize","35px"),d(a,"processedcsstitleSize","35px"),d(a,"exceptedcssvalueSize","35px"),d(a,"exceptedcsstitleSize","35px"),d(a,"ratiocsstitleSize","35px"),d(a,"ratiocssvalueSize","65px"),d(a,"circlecssFontSize","27px"),d(a,"decimals",""),d(a,"fontColor","#ffffff"),d(a,"adjustTableFontSize",!1),d(a,"isExceptedTextBold",!1),d(a,"isProcessedTextBold",!1),d(a,"isCircleTextBold",!1),d(a,"isexceptedtitleBold",!1),d(a,"isexceptedvalueBold",!1),d(a,"isprocessedtitleBold",!1),d(a,"isprocessedvalueBold",!1),d(a,"isratiovalueBold",!1),d(a,"isratiotitleBold",!1),d(a,"format","none"),d(a,"decimals",""),d(a,"rangeOfVaule",""),d(a,"isHighlight",!0),d(a,"isShowlegend",!0),d(a,"legendDisplay",""),d(a,"radarHeight","height:100%"),d(a,"legendColor",[]),d(a,"legendText",[]),d(a,"polygonColor",[]),d(a,"currentMetrics",[]),d(a,"currentTheme",""),d(a,"hoverDisplay","none!important"),d(a,"tipBackgroundColor",""),d(a,"exceptedfontColor","#FFFFFF"),d(a,"exceptedtitleColor","#00ffff"),d(a,"exceptedvalueColor","#FFFFFF"),d(a,"processedfontColor","#FFFFFF"),d(a,"processedtitleColor","#00ffff"),d(a,"processedvalueColor","#FFFFFF"),d(a,"ratiotitleColor","#00ffff"),d(a,"circlefontColor","#33CCFF"),d(a,"sidecolors",["#299c46","rgba(237, 129, 40, 1)","#d44a3a"]),d(a,"textcolors",["#299c46","rgba(237, 129, 40, 1)","#d44a3a"]),d(a,"valueFontColor","#33CCFF"),d(a,"textFontColor","#FFFFFF"),d(a,"resultData",[]),d(a,"enExceptedTitle","Max Level"),d(a,"twExceptedTitle","最大水量"),d(a,"cnExceptedTitle","最大水量"),d(a,"enProcessedTitle","Cur Level"),d(a,"twProcessedTitle","目前水量"),d(a,"cnProcessedTitle","目前水量"),d(a,"dataarr",[]),d(a,"sourceunit",["",""]),d(a,"thresholds",[]),d(a,"thresholds1",[]),d(a,"isCheckUnit",!1),a);return c.dashboard.meta.language?c.panel.lang=c.dashboard.meta.language:c.panel.lang="en",j.defaults(c.panel,g),c.events.on("data-received",c.onDataReceived.bind(c)),c.events.on("data-error",c.onDataError.bind(c)),c.events.on("init-edit-mode",c.onInitEditMode.bind(c)),c}return g(b,a),o(b,[{key:"onInitEditMode",value:function(){this.panel.fontSize=this.formatFont(this.dictFontCalc[this.formatFont(this.panel.fontSize)].text),this.addEditorTab("Editor","public/plugins/advantech-water-achieving-rate3/partials/editor.html",4),this.unitFormats=i.getUnitFormats()}},{key:"onDataError",value:function(a){console.log("error:"+a)}},{key:"onDataReceived",value:function(a){this.getTheme(),this.panel.tagsName=[],this.panel.tagsValue=[],this.panel.legendText=[],this.panel.legendColor=[],this.panel.currentMetrics=[],this.panel.dataarr=[];var b=[],c=a,d=!1;if(j.isEmpty(a)&&(this.clearDraw(),this.throwError("Please input query statement")),a.length>0&&a[0].target)if(2==a.length){d=!0;for(var e=0;e<c.length;e++){this.panel.obj={},b=Object.keys(c[e]);for(var f=0;f<b.length;f++)"datapoints"==b[f]||(this.panel.obj[b[f]]=c[e][b[f]]);this.panel.dataarr.push(this.panel.obj)}}else 1==a.length?(this.clearDraw(),this.throwError("The dataList.length should be 2")):a.length>2&&(this.clearDraw(),this.throwError("The dataList.length should be 2"));d&&(this.chengeLegenColor(!1),this.panel.resultData=a,this.setUnitFormat(this.panel.format),this.setFontSize(),this.renderTheColor())}},{key:"getTheme",value:function(){var a=l(".radar-theme").css("color");"rgb(169, 169, 169)"==a?(this.panel.currentTheme="dark",this.panel.tipBackgroundColor="rgba(50, 50, 50, 0.7)"):(this.panel.currentTheme="light",this.panel.tipBackgroundColor="rgba(245, 245, 245, 0.7)")}},{key:"throwError",value:function(a){var b=new Error;throw b.message=a,b.data=a,b}},{key:"clearDraw",value:function(){var a=SVG(this.panel.radarId);a.clear()}},{key:"dataParse",value:function(a,b){for(var c=this,d="",e={},f="",g=function(g){var h=!1;e=new Object,a.forEach(function(f,i){"metric"!=a[i].text.toLowerCase()?(e[a[i].text]=b[g][i],0==g&&c.panel.tagsName.length<a.length-1&&c.panel.tagsName.push(a[i].text)):(h=!0,d=b[g][i].toString(),c.panel.currentMetrics.push(b[g][i].toString()))}),c.panel.rowDatas[d]?c.panel.rowDatas[d].value=Object.values(e):(f=c.getRandomColor(),c.panel.rowDatas[d]={value:Object.values(e),color:f,legendText:d,editLegendText:"",showLegendText:"",textDecration:"none"})},h=0;h<b.length;h++)g(h)}},{key:"getRandomColor",value:function(){for(var a="0123456789ABCDEF",b="#",c=0;c<6;c++)b+=a[Math.floor(16*Math.random())];return b}},{key:"removeKeys",value:function(a){var b=this,c=Object.keys(this.panel.rowDatas),d=this.arrDiff(a,c);d&&d.forEach(function(a){delete b.panel.rowDatas[a]})}},{key:"arrDiff",value:function(a,b){for(var c=[],d=[],e=0;e<a.length;e++)c[a[e]]=!0;for(var f=0;f<b.length;f++)c[b[f]]?delete c[b[f]]:c[b[f]]=!0;for(var g in c)d.push(g);return d}},{key:"formatFont",value:function(a){var b="";return b=null==a||"100%"==a?"100%":0==a.indexOf("string")?a.replace("string:",""):a}},{key:"drawRadar",value:function(){var a=this,b=400,d=b/2,e=300,f=1,g=b/f,h=SVG(this.panel.radarId).size("100%","100%");for(h.clear();f>0;)this.drawCircle(h,g*f,e,f),f--;for(var i=[],j=0;j<this.panel.tagsNum;j++)i[j]=this.drawPoint(h,d,j,this.panel.tagsNum,e),this.panel.tagsNameEdited[j]?this.panel.tagsNameCombine[j]=this.panel.tagsNameEdited[j]:this.panel.tagsNameCombine[j]=this.panel.tagsName[j],this.drawText(h,i[j],this.panel.tagsNameCombine[j],this.panel.fontColor,j);for(var k=this.largestVaule(this.panel.tagsValue),l=Math.max.apply(Math,c(k)),m=[],n=[],o="300,300",p=0;p<this.panel.tagsValue.length;p++){for(var q="",r=[],s=0;s<this.panel.tagsNum;s++){var t=this.setPolygonPosition(d,s,this.panel.tagsNum,this.panel.tagsValue[p],l,e);q+=t+" ",r[s]=t,m[p]=q}for(var u=[],v=0;v<this.panel.tagsNum;v++){var w=0;0==v&&r[this.panel.tagsNum-1]==o&&r[v+1]==o&&r[v]!=o?u[w]=r[v]:r[v-1]==o&&r[v+1]==o&&r[v]!=o?u[w]=r[v]:v==this.panel.tagsNum-1&&r[v-1]==o&&r[0]==o&&r[v]!=o&&(u[w]=r[v]),w++}n[p]=u}for(var x=0;x<this.panel.legendColor.length;x++)0==this.panel.legendColor[x].indexOf("#")?7==this.panel.legendColor[x].length||4==this.panel.legendColor[x].length?this.panel.polygonColor[x]=this.hexToRgbA(this.panel.legendColor[x]):this.throwError("Bad Hex, Please enter the color hex or rgb correctly."):0==this.panel.legendColor[x].indexOf("rgba(")?(this.panel.legendColor[x]=this.panel.legendColor[x],this.panel.polygonColor[x]=this.panel.legendColor[x]):0==this.panel.legendColor[x].indexOf("rgb(")?(this.panel.legendColor[x]=this.panel.legendColor[x].replace("rgb(","rgba("),this.panel.legendColor[x]=this.panel.legendColor[x].replace(")",",0.5)"),this.panel.polygonColor[x]=this.panel.legendColor[x]):this.throwError("Bad Hex, Please enter the color hex or rgb correctly.");if(m.forEach(function(b,c){a.drawPolygon(h,m[c],a.panel.polygonColor[c]),n[c]&&a.formatLinePosition(h,n[c],a.panel.polygonColor[c],o)}),this.drawLegend(),this.panel.isHighlight)for(var y=0;y<this.panel.tagsNum;y++)this.hoverLinePosition(h,i[y],o,y)}},{key:"drawCircle",value:function(a,b,c,d){var e=["rgba(78,78,78,1)","rgba(78,78,78,0.8)","rgba(78,78,78,0.6)","rgba(78,78,78,0.4)","rgba(78,78,78,0.2)"],f="#ffffff";if(f="dark"==this.panel.currentTheme?"#1E1E1E":"#c8c8c8",0==this.panel.isSideInformation){a.circle(b).attr({fill:e[d-1],stroke:f,"stroke-width":"4px",cx:c,cy:c})}else{a.circle(b).attr({fill:e[d-1],stroke:f,"stroke-width":"4px",cx:225,cy:c})}}},{key:"drawPoint",value:function(a,b,c,d,e){var f=360/d,g=-90+c*f,h=g/(180/Math.PI),i=b*Math.cos(h)+e,j=b*Math.sin(h)+e,k="#ffffff",l="",m="0px";"dark"==this.panel.currentTheme?(k="#ffffff",l="",m="0px"):(k="#adb5c4",l="#c8c8c8",m="0.5px");a.circle(12).attr({fill:k,stroke:l,"stroke-width":m,cx:i,cy:j});return i+","+j}},{key:"setFontSize",value:function(){var a=this.panel.resultData,b=void 0==this.panel.valueFontColor?"#33CCFF":this.panel.valueFontColor,c=void 0==this.panel.textFontColor?"#FFFFFF":this.panel.textFontColor,d=this.panel.exceptedfontColor,e=this.panel.exceptedtitleColor,f=this.panel.exceptedvalueColor,g=this.panel.processedfontColor,h=this.panel.processedtitleColor,i=this.panel.processedvalueColor,j=this.panel.ratiotitleColor,k=this.panel.enExceptedTitle,l=this.panel.twExceptedTitle,m=this.panel.cnExceptedTitle,o=this.panel.enProcessedTitle,p=this.panel.twProcessedTitle,q=this.panel.cnProcessedTitle,r=this.panel.lang,s=SVG(this.panel.radarId);s.clear();var t="original"===this.panel.WaterType?300:0,u=300,v=200,w=0,x=0,y=90,z=this.panel.isratiovalueBold,A=this.panel.isratiotitleBold,B=this.panel.isExceptedTextBold,C=this.panel.isexceptedtitleBold,D=this.panel.isexceptedvalueBold,E=this.panel.isProcessedTextBold,F=this.panel.isprocessedtitleBold,G=this.panel.isprocessedvalueBold,H=this.panel.isCircleTextBold,I=a[0].datapoints[0],J=a[1].datapoints[0],K=a[0].datapoints[1],L=a[1].datapoints[1],M=void 0,N=void 0;"object"==("undefined"==typeof I?"undefined":n(I))&&"object"==("undefined"==typeof J?"undefined":n(J))?(M=I[0],N=J[0]):(M=I,N=J);var O=Math.floor(100*N/M),P=360*O/100,Q=P/2,R=y-Q,S=y+Q,T="original"===this.panel.WaterType?300+200*Math.cos(R*Math.PI/180):0+200*Math.cos(R*Math.PI/180),U=300+200*Math.sin(R*Math.PI/180),V="original"===this.panel.WaterType?300+200*Math.cos(S*Math.PI/180):0+200*Math.cos(S*Math.PI/180),W=300+200*Math.sin(S*Math.PI/180);O<=50?(w="M"+t+" "+u+",L"+T+" "+U+"A"+v+" "+v+" 0 0 1 "+V+" "+W+" Z",x=T+","+U+" "+V+","+W+" "+t+","+u):O>50&&O<100?(w="M"+t+" "+u+",L"+T+" "+U+"A"+v+" "+v+" 0 1 1 "+V+" "+W+" Z",x=T+" "+U+","+V+" "+W+","+t+" "+u):s.circle(2*v).fill(b.toString()).move("original"===this.panel.WaterType?100:-200,100);var X=s.path(w);X.fill(b.toString());var Y=s.polygon(x);if(O>50&&O<100?(Y.fill(b.toString()),Y.stroke({color:b.toString(),width:4,linecap:"round",linejoin:"round"})):O<=50&&(Y.fill("#323233"),Y.stroke({color:"#323233",width:4,linecap:"round",linejoin:"round"})),s.circle(2*v).fill("none").stroke({color:b.toString(),width:7,linecap:"round",linejoin:"round"}).move("original"===this.panel.WaterType?100:-200,100),"original"===this.panel.WaterType&&(s.line(V,W,V-90,W).stroke({width:4,color:b.toString()}),s.line(300,100,500,100).stroke({width:4,color:b.toString()})),this.panel.exceptedfontSize=this.formatFont(this.panel.exceptedfontSize),this.panel.exceptedtitleSize=this.formatFont(this.panel.exceptedtitleSize),this.panel.exceptedvalueSize=this.formatFont(this.panel.exceptedvalueSize),this.panel.processedfontSize=this.formatFont(this.panel.processedfontSize),this.panel.processedtitleSize=this.formatFont(this.panel.processedtitleSize),this.panel.processedvalueSize=this.formatFont(this.panel.processedvalueSize),this.panel.ratiotitleSize=this.formatFont(this.panel.ratiotitleSize),this.panel.ratiovalueSize=this.formatFont(this.panel.ratiovalueSize),this.panel.circlefontSize=this.formatFont(this.panel.circlefontSize),this.panel.adjustTableFontSize){if(this.panel.exceptedcssFontSize=this.dictFontCalc[this.panel.exceptedfontSize].value,this.panel.processedcssFontSize=this.dictFontCalc[this.panel.processedfontSize].value,this.panel.circlecssFontSize=this.dictFontCalc[this.panel.circlefontSize].value,s.text(k).fill(d.toString()).dx(520).dy(70).size(this.panel.exceptedcssFontSize),s.text(o).fill(g.toString()).dx(V-225).dy(W-30).size(this.panel.processedcssFontSize),"original"===this.panlel.WaterType)s.text(O+"%").fill(c.toString()).dx(230).dy(400).size(this.panel.circlecssFontSize).font({weight:H?"bold":"normal",anchor:"middle"});else if("new"===this.panel.WaterType)if("none"===this.panel.iconType){var Z=s.image("");Z.size(205,205).move(-100,200)}else if("oil"===this.panel.iconType){var Z=s.image("public/plugins/advantech-water-achieving-rate3/img/oil.svg");Z.size(205,205).move(-100,200)}else if("water"===this.panel.iconType){var Z=s.image("public/plugins/advantech-water-achieving-rate3/img/water.svg");Z.size(205,205).move(-100,200)}else if("temperature"===this.panel.iconType){var Z=s.image("public/plugins/advantech-water-achieving-rate3/img/Temperature.svg");Z.size(205,205).move(-100,200)}}else if(this.panel.exceptedcssFontSize=this.dictFontCalc[this.panel.exceptedfontSize].px,this.panel.processedcssFontSize=this.dictFontCalc[this.panel.processedfontSize].px,this.panel.processedcssvalueSize=this.dictFontCalc[this.panel.processedvalueSize].px,this.panel.processedcsstitleSize=this.dictFontCalc[this.panel.processedtitleSize].px,this.panel.exceptedcssvalueSize=this.dictFontCalc[this.panel.exceptedvalueSize].px,this.panel.exceptedcsstitleSize=this.dictFontCalc[this.panel.exceptedtitleSize].px,this.panel.ratiocssvalueSize=this.dictFontCalc[this.panel.ratiovalueSize].px,this.panel.ratiocsstitleSize=this.dictFontCalc[this.panel.ratiotitleSize].px,this.panel.circlecssFontSize=this.dictFontCalc[this.panel.circlefontSize].px,"new"==this.panel.WaterType){switch(s.text(O+"%").fill(c.toString()).dx(520).dy(180).size(this.panel.ratiocssvalueSize).font({weight:z?"bold":"normal",anchor:"middle"}),r){case"en":s.text("Ratio").fill(j.toString()).dx(520).dy(125).size(this.panel.ratiocsstitleSize).font({weight:A?"bold":"normal",anchor:"middle"}),s.text(k).fill(e.toString()).dx(640).dy(320).size(this.panel.exceptedcsstitleSize).font({weight:C?"bold":"normal",anchor:"middle"});break;case"zh_tw":s.text("佔比").fill(j.toString()).dx(520).dy(125).size(this.panel.ratiocsstitleSize).font({weight:A?"bold":"normal",anchor:"middle"}),s.text(l).fill(e.toString()).dx(640).dy(320).size(this.panel.exceptedcsstitleSize).font({weight:C?"bold":"normal",anchor:"middle"});break;case"zh_cn":s.text("佔比").fill(j.toString()).dx(520).dy(125).size(this.panel.ratiocsstitleSize).font({weight:A?"bold":"normal",anchor:"middle"}),s.text(m).fill(e.toString()).dx(640).dy(320).size(this.panel.exceptedcsstitleSize).font({weight:C?"bold":"normal",anchor:"middle"});break;default:s.text("Ratio").fill(j.toString()).dx(520).dy(125).size(this.panel.ratiocsstitleSize).font({weight:A?"bold":"normal",anchor:"middle"}),s.text(k).fill(e.toString()).dx(640).dy(320).size(this.panel.exceptedcsstitleSize).font({weight:C?"bold":"normal",anchor:"middle"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(f.toString()).dx(640).dy(375).size(this.panel.exceptedcssvalueSize).font({weight:D?"bold":"normal",anchor:"middle"});var $,_=s.line(0,110,0,170).move(520,350),aa=this.panel.seperateSize;switch($=aa.indexOf(!1)?parseInt(aa.replace("string:","").replace("%",""))/100:parseInt(aa.replace("%",""))/100,_.stroke({color:this.panel.seperateColor,width:5*$,linecap:"round"}),r){case"en":s.text(o).fill(h.toString()).dx(400).dy(320).size(this.panel.processedcsstitleSize).font({weight:F?"bold":"normal",anchor:"middle"});break;case"zh_tw":s.text(p).fill(h.toString()).dx(400).dy(320).size(this.panel.processedcsstitleSize).font({weight:F?"bold":"normal",anchor:"middle"});break;case"zh_cn":s.text(q).fill(h.toString()).dx(400).dy(320).size(this.panel.processedcsstitleSize).font({weight:F?"bold":"normal",anchor:"middle"});break;default:s.text(o).fill(h.toString()).dx(400).dy(320).size(this.panel.processedcsstitleSize).font({weight:F?"bold":"normal",anchor:"middle"})}if(s.text(L.toString()+this.panel.sourceunit[1]).fill(i.toString()).dx(400).dy(375).size(this.panel.processedcssvalueSize).font({weight:G?"bold":"normal",anchor:"middle"}),"oil"===this.panel.iconType){var Z=s.image("public/plugins/advantech-water-achieving-rate3/img/oil.svg");Z.size(205,205).move(-100,200)}else if("water"===this.panel.iconType){var Z=s.image("public/plugins/advantech-water-achieving-rate3/img/water.svg");Z.size(205,205).move(-100,200)}else if("temperature"===this.panel.iconType){var Z=s.image("public/plugins/advantech-water-achieving-rate3/img/Temperature.svg");Z.size(205,205).move(-100,200)}}else if("original"==this.panel.WaterType){if(s.text(O+"%").fill(c.toString()).dx(300).dy(350).size(this.panel.circlecssFontSize).font({weight:H?"bold":"normal",anchor:"middle"}),"200%"==this.panel.exceptedfontSize){switch(language){case"en":s.text(k).fill(d.toString()).dx(520).dy(50).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_tw":s.text(l).fill(d.toString()).dx(520).dy(50).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_cn":s.text(m).fill(d.toString()).dx(520).dy(50).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;default:s.text(k).fill(d.toString()).dx(520).dy(50).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(d.toString()).dx(520).dy(120).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}else if("220%"==this.panel.exceptedfontSize){switch(r){case"en":s.text(k).fill(d.toString()).dx(520).dy(45).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_tw":s.text(l).fill(d.toString()).dx(520).dy(45).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_cn":s.text(m).fill(d.toString()).dx(520).dy(45).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;default:s.text(k).fill(d.toString()).dx(520).dy(45).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(d.toString()).dx(520).dy(120).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}else if("230%"==this.panel.exceptedfontSize){switch(r){case"en":s.text(k).fill(d.toString()).dx(520).dy(40).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_tw":s.text(l).fill(d.toString()).dx(520).dy(40).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_cn":s.text(m).fill(d.toString()).dx(520).dy(40).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;default:s.text(k).fill(d.toString()).dx(520).dy(40).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(d.toString()).dx(520).dy(125).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}else if("180%"==this.panel.exceptedfontSize){switch(r){case"en":s.text(k).fill(d.toString()).dx(520).dy(55).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_tw":s.text(l).fill(d.toString()).dx(520).dy(55).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_cn":s.text(m).fill(d.toString()).dx(520).dy(55).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;default:s.text(k).fill(d.toString()).dx(520).dy(55).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(d.toString()).dx(520).dy(120).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}else if("160%"==this.panel.exceptedfontSize){switch(r){case"en":s.text(k).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_tw":s.text(l).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_cn":s.text(m).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;default:s.text(k).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(d.toString()).dx(520).dy(115).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}else if("150%"==this.panel.exceptedfontSize){switch(r){case"en":s.text(k).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_tw":s.text(l).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_cn":s.text(m).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;default:s.text(k).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(d.toString()).dx(520).dy(110).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}else if("140%"==this.panel.exceptedfontSize){switch(r){case"en":s.text(k).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_tw":s.text(l).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_cn":s.text(m).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;default:s.text(k).fill(d.toString()).dx(520).dy(60).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(d.toString()).dx(520).dy(105).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}else{switch(r){case"en":s.text(k).fill(d.toString()).dx(520).dy(65).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_tw":s.text(l).fill(d.toString()).dx(520).dy(65).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;case"zh_cn":s.text(m).fill(d.toString()).dx(520).dy(65).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"});break;default:s.text(k).fill(d.toString()).dx(520).dy(65).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}s.text(K.toString()+this.panel.sourceunit[0]).fill(d.toString()).dx(520).dy(105).size(this.panel.exceptedcssFontSize).font({weight:B?"bold":"normal"})}if("200%"==this.panel.processedfontSize){switch(r){case"en":s.text(o).fill(g.toString()).dx(V-130).dy(W-125).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_tw":s.text(p).fill(g.toString()).dx(V-130).dy(W-125).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_cn":s.text(q).fill(g.toString()).dx(V-130).dy(W-125).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;default:s.text(o).fill(g.toString()).dx(V-130).dy(W-125).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}s.text(L.toString()+this.panel.sourceunit[1]).fill(g.toString()).dx(V-130).dy(W-60).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}else if("220%"==this.panel.processedfontSize){switch(r){case"en":s.text(o).fill(g.toString()).dx(V-130).dy(W-125).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_tw":s.text(p).fill(g.toString()).dx(V-130).dy(W-125).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_cn":s.text(q).fill(g.toString()).dx(V-130).dy(W-125).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;default:s.text(o).fill(g.toString()).dx(V-130).dy(W-125).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}s.text(L.toString()+this.panel.sourceunit[1]).fill(g.toString()).dx(V-130).dy(W-50).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}else if("230%"==this.panel.processedfontSize){switch(r){case"en":s.text(o).fill(g.toString()).dx(V-130).dy(W-135).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_tw":s.text(p).fill(g.toString()).dx(V-130).dy(W-135).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_cn":s.text(q).fill(g.toString()).dx(V-130).dy(W-135).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;default:s.text(o).fill(g.toString()).dx(V-130).dy(W-135).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}s.text(L.toString()+this.panel.sourceunit[1]).fill(g.toString()).dx(V-130).dy(W-50).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}else if("180%"==this.panel.processedfontSize){switch(r){case"en":s.text(o).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_tw":s.text(p).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_cn":s.text(q).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;default:s.text(o).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}s.text(L.toString()+this.panel.sourceunit[1]).fill(g.toString()).dx(V-115).dy(W-45).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}else if("160%"==this.panel.processedfontSize){switch(r){case"en":s.text(o).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_tw":s.text(p).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_cn":s.text(q).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;default:s.text(o).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}s.text(L.toString()+this.panel.sourceunit[1]).fill(g.toString()).dx(V-115).dy(W-45).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}else if("150%"==this.panel.processedfontSize){switch(r){case"en":s.text(o).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_tw":s.text(p).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_cn":s.text(q).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;default:s.text(o).fill(g.toString()).dx(V-115).dy(W-110).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}s.text(L.toString()+this.panel.sourceunit[1]).fill(g.toString()).dx(V-115).dy(W-45).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}else if("140%"==this.panel.processedfontSize){switch(r){case"en":s.text(o).fill(g.toString()).dx(V-115).dy(W-80).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_tw":s.text(p).fill(g.toString()).dx(V-115).dy(W-80).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_cn":s.text(q).fill(g.toString()).dx(V-115).dy(W-80).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;default:s.text(o).fill(g.toString()).dx(V-115).dy(W-80).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}s.text(L.toString()+this.panel.sourceunit[1]).fill(g.toString()).dx(V-115).dy(W-15).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}else{switch(r){case"en":s.text(o).fill(g.toString()).dx(V-125).dy(W-40).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_tw":s.text(p).fill(g.toString()).dx(V-125).dy(W-40).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;case"zh_cn":s.text(q).fill(g.toString()).dx(V-125).dy(W-40).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"});break;default:s.text(o).fill(g.toString()).dx(V-125).dy(W-40).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}s.text(L.toString()+this.panel.sourceunit[1]).fill(g.toString()).dx(V-125).dy(W).size(this.panel.processedcssFontSize).font({weight:E?"bold":"normal",anchor:"end"})}}}},{key:"limitThresholds",value:function(a){var b=(this.panel.resultData,/^[0-9]+\b,[0-9]+$/),c=[];return null==a||""==a?(this.panel.thresholds=null,this.panel.valueFontColor="#33CCFF",void this.renderTheColor()):void(a.toString().match(b)?(c=a.toString().split(","),c.length>0&&parseInt(c[0])>parseInt(c[1])?(c.reverse(),this.panel.thresholds=c,this.renderTheColor()):(this.panel.thresholds=c,this.renderTheColor())):(this.panel.thresholds=a,this.panel.valueFontColor="#33CCFF",this.renderTheColor()))}},{key:"limitThresholds1",value:function(a){var b=/^[0-9]+\b,[0-9]+$/,c=[];return null==a||""==a?(this.panel.thresholds1=null,this.panel.textFontColor="#FFFFFF",void this.renderTheColor1()):void(a.toString().match(b)?(c=a.toString().split(","),c.length>0&&parseInt(c[0])>parseInt(c[1])?(c.reverse(),this.panel.thresholds1=c,this.renderTheColor1()):(this.panel.thresholds1=c,this.renderTheColor1())):(this.panel.thresholds1=a,this.panel.textFontColor="#FFFFFF",this.renderTheColor1()))}},{key:"onColorChange",value:function(a){var b=this.panel.resultData;"object"==n(b.thresholds)&&this.renderTheColor(a)}},{key:"onColorChange1",value:function(a){var b=this.panel.resultData;"object"==n(b.thresholds1)&&this.renderTheColor1(a)}},{key:"invertColorOrder",value:function(){var a=this.panel.resultData;this.panel.sidecolors.reverse(),"object"==n(a.thresholds)&&this.renderTheColor(index);
}},{key:"invertColorOrder1",value:function(){var a=this.panel.resultData;this.panel.textcolors.reverse(),"object"==n(a.thresholds1)&&this.renderTheColor1(index)}},{key:"singleColorChange",value:function(a,b,c){var d=this.panel.resultData;1==b?d.title1Color=c:2==b&&(d.title2Color=c)}},{key:"renderTheColor",value:function(){var a=this.panel.resultData;this.panel.rowData;if(null!=this.panel.thresholds){var b=this.panel.thresholds[0],c=this.panel.thresholds[1],d=(a[0].datapoints[0],a[1].datapoints[0]),e=d,f=e[0];f<=b?this.panel.valueFontColor=this.panel.sidecolors[0]:f>b&&f<=c?this.panel.valueFontColor=this.panel.sidecolors[1]:this.panel.valueFontColor=this.panel.sidecolors[2]}else this.panel.valueFontColor="#33CCFF";this.setFontSize()}},{key:"renderTheColor1",value:function(){var a=this.panel.resultData;if(null!=this.panel.thresholds1){var b=this.panel.thresholds1[0],c=this.panel.thresholds1[1],d=a[0].datapoints[0],e=a[1].datapoints[0],f=d,g=e,h=g[0],i=Math.floor(100*h/f[0]);i<=b?this.panel.textFontColor=this.panel.textcolors[0]:i>b&&i<=c?this.panel.textFontColor=this.panel.textcolors[1]:this.panel.textFontColor=this.panel.textcolors[2]}else this.panel.textFontColor="#FFFFFF";this.setFontSize()}},{key:"drawText",value:function(a,b,c,d,e){var f=this.panel.tagsNum,g=b.split(","),h="",i="normal",j=this.formatFont(this.panel.fontSize).replace("0%","");"dark"==this.panel.currentTheme?"rgb(50,50,51)"!=d&&"#323233"!=d&&"rgb(50,50,51)"!=this.panel.fontColor&&"#323233"!=this.panel.fontColor||(this.panel.fontColor="#ffffff",d="#ffffff"):"light"==this.panel.currentTheme&&("rgb(255, 255, 255)"==this.panel.fontColor&&"rgb(255, 255, 255)"==d||"#ffffff"==d||"#ffffff"==this.panel.fontColor)&&(this.panel.fontColor="#323233",d="#323233"),i=this.panel.isTextBold?"bold":"normal",e==f/2||0==e?h="middle":e<f/2?h="start":e>f/2&&(h="end"),this.dashboard.meta&&this.dashboard.meta.isPc===!1&&(this.panel.adjustTableFontSize=!1,this.panel.cssFontSize=this.dictFontCalc[this.panel.fontSize].px),this.panel.adjustTableFontSize?0==e?g[1]=parseFloat(g[1])-1.2*j:e/f<.25?(g[0]=parseFloat(g[0])+1.2*j,g[1]=parseFloat(g[1])-.8*j):e/f==.25?(g[0]=parseFloat(g[0])+1.2*j,g[1]=parseFloat(g[1])+.5*j):e<f/2&&e/f>.25?(g[0]=parseFloat(g[0])+1.2*j,g[1]=parseFloat(g[1])+1.6*j):e==f/2?g[1]=parseFloat(g[1])+2.2*j:e>f/2&&e/f<.75?(g[0]=parseFloat(g[0])-1.2*j,g[1]=parseFloat(g[1])+1.6*j):e/f==.75?(g[0]=parseFloat(g[0])-1.2*j,g[1]=parseFloat(g[1])+.5*j):e/f>.75&&(g[0]=parseFloat(g[0])-1.2*j,g[1]=parseFloat(g[1])-.8*j):0==e?g[1]=parseFloat(g[1])-5.2*j:e/f<.25?(g[0]=parseFloat(g[0])+1.6*j,j>10?g[1]=parseFloat(g[1])-4*j:g[1]=parseFloat(g[1])-3*j):e/f==.25?(g[0]=parseFloat(g[0])+1.6*j,j<10?g[1]=parseFloat(g[1])-2*j:g[1]=parseFloat(g[1])-3*j):e<f/2&&e/f>.25?(g[0]=parseFloat(g[0])+1*j,j>9?g[1]=parseFloat(g[1])-2*j:g[1]=parseFloat(g[1])-1*j):e==f/2?j>9&&j<17?g[1]=parseFloat(g[1])-.5*j:j>17?g[1]=parseFloat(g[1])-.6*j:g[1]=parseFloat(g[1])+.8*j:e>f/2&&e/f<.75?(g[0]=parseFloat(g[0])-1*j,j>9?g[1]=parseFloat(g[1])-2*j:g[1]=parseFloat(g[1])-1*j):e/f==.75?(g[0]=parseFloat(g[0])-1.6*j,j<10?g[1]=parseFloat(g[1])-2*j:g[1]=parseFloat(g[1])-3*j):e/f>.75&&(g[0]=parseFloat(g[0])-1.6*j,j>10?g[1]=parseFloat(g[1])-4*j:g[1]=parseFloat(g[1])-3*j);var k=a.text(c).attr({fill:d,x:g[0],y:g[1]});k.font({family:"Helvetica",size:this.panel.cssFontSize,weight:i,anchor:h})}},{key:"largestVaule",value:function(a){return a.map(Function.apply.bind(Math.max,null))}},{key:"setPolygonPosition",value:function(a,b,c,d,e,f){var g=360/c,h=-90+b*g,i=h/(180/Math.PI);""!=this.panel.rangeOfVaule&&null!=this.panel.rangeOfVaule&&(e=this.panel.rangeOfVaule);var j=0,k=0;return d[b]>e?(j=a*Math.cos(i)+f,k=a*Math.sin(i)+f):(j=a*Math.cos(i)*(d[b]/e)+f,k=a*Math.sin(i)*(d[b]/e)+f),j+","+k}},{key:"drawPolygon",value:function(a,b,c){a.polygon(b).attr({fill:c,cx:0,cy:0})}},{key:"formatLinePosition",value:function(a,b,c,d){var e=this;b.forEach(function(f,g){if(null!=b[g]){var h=b[g].split(",")[0],i=b[g].split(",")[1],j=d.split(",")[0],k=d.split(",")[1];e.drawLine(a,h,i,c,j,k)}})}},{key:"drawLine",value:function(a,b,c,d,e,f){var g=a.line(e,f,b,c);g.stroke({color:d,width:5})}},{key:"hexToRgbA",value:function(a){var b=void 0;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(a))return b=a.substring(1).split(""),3==b.length&&(b=[b[0],b[0],b[1],b[1],b[2],b[2]]),b="0x"+b.join(""),"rgba("+[b>>16&255,b>>8&255,255&b].join(",")+",0.5)";throw new Error("Bad Hex")}},{key:"componentToHex",value:function(a){var b=a.toString(16);return 1==b.length?"0"+b:b}},{key:"rgbToHex",value:function(a,b,c){return"#"+this.componentToHex(a)+this.componentToHex(b)+this.componentToHex(c)}},{key:"drawLegend",value:function(){var a=this;Object.keys(this.panel.rowDatas).forEach(function(b){a.panel.rowDatas[b].editLegendText?a.panel.rowDatas[b].showLegendText=a.panel.rowDatas[b].editLegendText:a.panel.rowDatas[b].showLegendText=a.panel.rowDatas[b].legendText})}},{key:"changeLegendShow",value:function(a){a?(this.panel.radarHeight="",this.panel.legendDisplay=""):(this.panel.radarHeight="height:100%",this.panel.legendDisplay="display:none;")}},{key:"chengeLegenColor",value:function(a){var b=this;this.panel.legendText.forEach(function(a,c){b.panel.legendColor[c]=b.panel.rowDatas[a].color}),a&&this.drawRadar()}},{key:"hoverLinePosition",value:function(a,b,c,d){var e=b.split(",")[0],f=b.split(",")[1],g=c.split(",")[0],h=c.split(",")[1];this.drawHoverLine(a,e,f,g,h,d)}},{key:"drawHoverLine",value:function(a,b,c,d,e,f){var g=a.line(d,e,b,c),h=this.panel.radarToolTipId,i=this.panel.rowDatas,j=this.panel.legendText,k=this.panel.tagsNum;g.attr("lineNum",f),g.attr("highlight",this.panel.isHighlight),g.stroke({color:"rgba(255,255,255,0)",width:25}),l("#"+g.attr("id")).mouseenter(function(a){g.attr("highlight")&&(document.getElementById(h).innerHTML="",null!==f&&""!==f&&(0==f?(document.getElementById(h).style.top="18%",document.getElementById(h).style.left="42%"):f/k<.25&&0!=f?(document.getElementById(h).style.top="20%",document.getElementById(h).style.left="50%"):f/k==.25?(document.getElementById(h).style.top="30%",document.getElementById(h).style.left="52%"):f/k>.25&&f/k<.5?(document.getElementById(h).style.top="40%",document.getElementById(h).style.left="50%"):f/k==.5?(document.getElementById(h).style.top="45%",document.getElementById(h).style.left="45%"):f/k>.5&&f/k<.75?(document.getElementById(h).style.top="40%",document.getElementById(h).style.left="38%"):f/k==.75?(document.getElementById(h).style.top="30%",document.getElementById(h).style.left="36%"):f/k>.75?(document.getElementById(h).style.top="20%",document.getElementById(h).style.left="38%"):console.log("lineError"),j.forEach(function(a){document.getElementById(h).innerHTML+='<div style="display:block;"><div class="radar-hover-legend-color" style="background-color:'+i[a].color+';"></div><span style="min-width:20px;margin:0px 5px">'+i[a].showLegendText+'</span><span style="min-width:20px;text-align:right;margin:0px 5px;">'+i[a].showValue[f]+"</span></div>"}),document.getElementById(h).style.display="block"))}).mouseleave(function(a){document.getElementById(h).style.display="none"})}},{key:"hoverEvent",value:function(a){a?this.panel.hoverDisplay="block":this.panel.hoverDisplay="none"}},{key:"setUnitFormat",value:function(a,b){var c=this.panel.resultData,d=c[0].datapoints[0],e=c[1].datapoints[0],f=d,g=e;"object"==("undefined"==typeof a?"undefined":n(a))?this.panel.format=a.value:"string"==typeof a&&(this.panel.format=a);var h=i.valueFormats[this.panel.format],j=void 0,k=void 0;"object"==("undefined"==typeof g?"undefined":n(g))&&"object"==("undefined"==typeof f?"undefined":n(f))?parseInt(this.panel.decimals)?(j=h(g[0],parseInt(this.panel.decimals),null),k=h(f[0],parseInt(this.panel.decimals),null)):(j=h(g[0],"",null),k=h(f[0],"",null)):"string"==typeof g&&"string"==typeof f&&(parseInt(this.panel.decimals)?(j=h(g,parseInt(this.panel.decimals),null),k=h(f,parseInt(this.panel.decimals),null)):(j=h(g,"",null),k=h(f,"",null))),this.panel.resultData[0].datapoints[1]=k,this.panel.resultData[1].datapoints[1]=j,this.setFontSize()}},{key:"setting",value:function(a){var b=this.panel;b.isCheckUnit=a;var c=this.panel.dataarr[0].unit,d=this.panel.dataarr[1].unit,e=this.panel.resultData,f=e[0].datapoints[0],g=e[1].datapoints[0],h=f,j=g;if(a){this.panel.sourceunit[0]=c,this.panel.sourceunit[1]=d;var k=i.valueFormats.none,l=void 0,m=void 0;"object"==("undefined"==typeof j?"undefined":n(j))&&"object"==("undefined"==typeof h?"undefined":n(h))?parseInt(this.panel.decimals)?(l=k(j[0],parseInt(this.panel.decimals),null),m=k(h[0],parseInt(this.panel.decimals),null)):(l=k(j[0],"",null),m=k(h[0],"",null)):"string"==typeof j&&"string"==typeof h&&(parseInt(this.panel.decimals)?(l=k(j,parseInt(this.panel.decimals),null),m=k(h,parseInt(this.panel.decimals),null)):(l=k(j,"",null),m=k(h,"",null))),this.panel.resultData[0].datapoints[1]=m,this.panel.resultData[1].datapoints[1]=l,this.setFontSize()}else{this.panel.sourceunit[0]="",this.panel.sourceunit[1]="","object"==("undefined"==typeof subItem?"undefined":n(subItem))?this.panel.format=subItem.value:"string"==typeof subItem&&(this.panel.format=subItem);var o=i.valueFormats[this.panel.format],p=void 0,q=void 0;"object"==("undefined"==typeof j?"undefined":n(j))&&"object"==("undefined"==typeof h?"undefined":n(h))?parseInt(this.panel.decimals)?(p=o(j[0],parseInt(this.panel.decimals),null),q=o(h[0],parseInt(this.panel.decimals),null)):(p=o(j[0],"",null),q=o(h[0],"",null)):"string"==typeof j&&"string"==typeof h&&(parseInt(this.panel.decimals)?(p=o(j,parseInt(this.panel.decimals),null),q=o(h,parseInt(this.panel.decimals),null)):(p=o(j,"",null),q=o(h,"",null))),this.panel.resultData[0].datapoints[1]=q,this.panel.resultData[1].datapoints[1]=p,this.setFontSize()}}}]),b}(h)),a("WaterRate",p),p.templateUrl="partials/module.html"}}});
//# sourceMappingURL=water_rate_ctrl.js.map